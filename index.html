<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿ∞ŸÉŸäÿ© üë∂ Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f9fafb;
        }

        [data-theme="dark"] {
            --bg: #111827;
            --card-bg: #1f2937;
            --text: #f9fafb;
            --border: #374151;
        }

        [data-theme="light"] {
            --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: #ffffff;
            --text: #1f2937;
            --border: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: all 0.3s;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ÿßŸÑŸáŸäÿØÿ± */
        .header {
            background: var(--card-bg);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-left h1 {
            font-size: 1.8em;
            color: var(--primary);
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle {
            background: var(--primary);
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.3em;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .status-badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .badge-online { background: var(--success); color: white; }
        .badge-critical { background: var(--danger); color: white; }
        .badge-normal { background: var(--primary); color: white; }
        .badge-warning { background: var(--warning); color: white; }
        .badge-offline { background: #6b7280; color: white; }

        /* ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™ */
        .tabs {
            background: var(--card-bg);
            padding: 10px;
            border-radius: 15px;
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .tab {
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--text);
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        /* ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ÿßŸÑÿ¥ÿ®ŸÉÿ© */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
        }

        /* ÿßŸÑÿ®ÿ∑ÿßŸÇÿ© */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .card-title {
            font-size: 1.3em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ÿπÿ±ÿ∂ ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ */
        .sensor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .sensor-item {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        [data-theme="dark"] .sensor-item {
            background: #374151;
        }

        .sensor-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .sensor-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .sensor-value {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }

        .sensor-label {
            font-size: 0.9em;
            opacity: 0.7;
            font-weight: 600;
        }

        .sensor-status {
            margin-top: 8px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
        }

        .status-ok {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .status-alert {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        /* ÿßŸÑÿ≥ŸÑÿßŸäÿØÿ± */
        .slider-container {
            margin: 20px 0;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .slider-value {
            color: var(--primary);
            font-weight: bold;
            font-size: 1.1em;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }

        [data-theme="dark"] .slider {
            background: #4b5563;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        /* ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑŸÖÿ±ÿ¶Ÿäÿ© */
        .incubator-visual {
            width: 100%;
            height: 300px;
            background: linear-gradient(to bottom, #e0f2fe 0%, #bae6fd 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 4px solid var(--primary);
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] .incubator-visual {
            background: linear-gradient(to bottom, #1e3a8a 0%, #1e40af 100%);
        }

        .baby-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6em;
            animation: breathe 3s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        .incubator-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            padding: 10px;
            background: rgba(255,255,255,0.8);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        [data-theme="dark"] .incubator-overlay {
            background: rgba(31, 41, 55, 0.8);
        }

        /* ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ */
        .control-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ™ÿ®ÿØŸäŸÑ */
        .switch-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--light);
            border-radius: 12px;
            margin: 10px 0;
        }

        [data-theme="dark"] .switch-container {
            background: #374151;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 30px;
        }

        .switch-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .switch-slider {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        input:checked + .switch-slider:before {
            transform: translateX(30px);
        }

        input:disabled + .switch-slider {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© */
        .chart-container {
            height: 300px;
            position: relative;
        }

        /* ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ */
        .alerts-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .alert-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-right: 4px solid;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateX(50px);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border-right-color: #3b82f6;
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-right-color: var(--warning);
        }

        .alert-danger {
            background: rgba(239, 68, 68, 0.1);
            border-right-color: var(--danger);
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border-right-color: var(--success);
        }

        .alert-icon {
            font-size: 1.5em;
        }

        .alert-content {
            flex: 1;
        }

        .alert-time {
            font-size: 0.85em;
            opacity: 0.6;
        }

        /* ÿ≤ÿ± ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ */
        .emergency-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            z-index: 999;
        }

        .emergency-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 12px 30px rgba(239, 68, 68, 0.6);
        }

        .emergency-icon {
            font-size: 2em;
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂ */
        .patient-info {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .patient-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .patient-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .patient-label {
            font-size: 0.85em;
            opacity: 0.9;
        }

        .patient-value {
            font-size: 1.1em;
            font-weight: bold;
        }

        /* ÿ≠ŸÇŸàŸÑ ÿßŸÑÿ™ÿπÿØŸäŸÑ */
        .patient-edit-input {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid var(--primary);
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            background: var(--card-bg);
            color: var(--text);
            transition: all 0.3s;
            font-weight: bold;
        }

        .patient-edit-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        [data-theme="dark"] .patient-edit-input {
            background: #374151;
            border-color: var(--primary);
        }

        .patient-field {
            position: relative;
        }

        /* ŸÖÿ±ÿ®ÿπ ÿßŸÑÿØÿ±ÿØÿ¥ÿ© ŸÖÿπ AI */
        .ai-chat-container {
            display: flex;
            flex-direction: column;
            height: 600px;
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .ai-chat-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 3px solid rgba(255,255,255,0.2);
        }

        .ai-chat-header h3 {
            margin: 0;
            font-size: 1.3em;
        }

        .ai-status {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
        }

        .ai-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .ai-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: var(--light);
        }

        [data-theme="dark"] .ai-chat-messages {
            background: #1f2937;
        }

        .ai-message {
            display: flex;
            gap: 12px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ai-message.user {
            flex-direction: row-reverse;
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            flex-shrink: 0;
        }

        .ai-message.ai .ai-avatar {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .ai-message.user .ai-avatar {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .ai-message-content {
            max-width: 70%;
            padding: 15px 18px;
            border-radius: 18px;
            line-height: 1.6;
            word-wrap: break-word;
        }

        .ai-message.ai .ai-message-content {
            background: white;
            color: var(--dark);
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] .ai-message.ai .ai-message-content {
            background: #374151;
            color: var(--text);
        }

        .ai-message.user .ai-message-content {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-bottom-right-radius: 4px;
        }

        .ai-message-time {
            font-size: 0.75em;
            opacity: 0.6;
            margin-top: 5px;
        }

        .ai-typing {
            display: none;
            align-items: center;
            gap: 12px;
            padding: 15px;
        }

        .ai-typing.active {
            display: flex;
        }

        .ai-typing-dots {
            display: flex;
            gap: 4px;
            padding: 12px 18px;
            background: white;
            border-radius: 18px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] .ai-typing-dots {
            background: #374151;
        }

        .ai-typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary);
            animation: typing 1.4s infinite;
        }

        .ai-typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .ai-typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.7;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        .ai-chat-input-container {
            padding: 20px;
            background: var(--card-bg);
            border-top: 2px solid var(--border);
            display: flex;
            gap: 10px;
        }

        .ai-chat-input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid var(--border);
            border-radius: 25px;
            font-size: 1em;
            font-family: inherit;
            background: var(--light);
            color: var(--text);
            resize: none;
            outline: none;
            transition: all 0.3s;
            max-height: 120px;
        }

        [data-theme="dark"] .ai-chat-input {
            background: #374151;
        }

        .ai-chat-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .ai-send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .ai-send-btn:hover:not(:disabled) {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .ai-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .ai-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 0 20px 15px 20px;
            background: var(--card-bg);
        }

        .ai-suggestion-chip {
            padding: 8px 16px;
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text);
        }

        .ai-suggestion-chip:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        /* ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ */
        .connection-status {
            padding: 20px;
            background: var(--light);
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        [data-theme="dark"] .connection-status {
            background: #374151;
        }

        .connection-status.disconnected {
            border: 3px dashed var(--danger);
        }

        .connection-status.connected {
            border: 3px solid var(--success);
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .status-connected {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .status-disconnected {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .status-dot-animated {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: currentColor;
            animation: blink 1.5s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .connection-panel {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        [data-theme="dark"] .connection-panel {
            background: #374151;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            background: var(--card-bg);
            color: var(--text);
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .last-sync {
            font-size: 0.85em;
            opacity: 0.6;
            margin-top: 10px;
        }
        /* ÿ™ŸÜÿ≥ŸäŸÇÿßÿ™ ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÅÿ±ŸäŸÇ */
        .team-member {
            background: var(--light);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s;
        }

        [data-theme="dark"] .team-member {
            background: #374151;
        }

        .team-member:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .member-avatar {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .team-member h4 {
            color: var(--primary);
            font-size: 1.3em;
            margin-bottom: 5px;
        }

        .member-role {
            color: var(--warning);
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .member-info {
            text-align: right;
            margin: 20px 0;
            font-size: 0.9em;
            line-height: 1.8;
        }

        .social-links {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .social-btn {
            padding: 8px 20px;
            background: var(--primary);
            color: white;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.85em;
            transition: all 0.3s;
        }

        .social-btn:hover {
            background: var(--secondary);
            transform: scale(1.05);
        }

        /* ÿ™ŸÜÿ≥ŸäŸÇÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ */
        .supervisor-card {
            background: var(--light);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--primary);
        }

        [data-theme="dark"] .supervisor-card {
            background: #374151;
        }

        .supervisor-avatar {
            font-size: 3.5em;
            text-align: center;
            margin-bottom: 15px;
        }

        .supervisor-card h4 {
            color: var(--primary);
            font-size: 1.4em;
            text-align: center;
            margin-bottom: 5px;
        }

        .supervisor-title {
            text-align: center;
            color: var(--secondary);
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .supervisor-info {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            line-height: 2;
            font-size: 0.9em;
        }

        [data-theme="dark"] .supervisor-info {
            background: #1f2937;
        }

        .expertise {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }

        [data-theme="dark"] .expertise {
            background: #1f2937;
        }

        .tag {
            display: inline-block;
            padding: 5px 12px;
            background: var(--primary);
            color: white;
            border-radius: 15px;
            font-size: 0.85em;
        }

        .info-box {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }

        [data-theme="dark"] .info-box {
            background: #374151;
        }

        .info-box strong {
            color: var(--primary);
            display: block;
            margin-bottom: 10px;
        }

        .info-box p {
            margin: 0;
        }

        /* ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿµŸàŸäÿ± ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ */
        .d3-viewer-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .d3-canvas {
            width: 100%;
            height: 600px;
            background: linear-gradient(to bottom, #87ceeb 0%, #e0f2fe 50%, #f0f0f0 100%);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            perspective: 1200px;
            border: 3px solid var(--primary);
            box-shadow: inset 0 0 100px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] .d3-canvas {
            background: linear-gradient(to bottom, #0f172a 0%, #1e293b 50%, #334155 100%);
        }

        .floor-shadow {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 450px;
            height: 80px;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0.3) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(20px);
        }

        .incubator-3d {
            width: 420px;
            height: 400px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(20deg) rotateY(0deg);
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .incubator-3d:hover {
            transform: translate(-50%, -50%) rotateX(20deg) rotateY(25deg);
        }

        .incubator-base {
            width: 420px;
            height: 280px;
            position: absolute;
            bottom: 0;
            background: linear-gradient(145deg, #e8e8e8 0%, #d0d0d0 50%, #b8b8b8 100%);
            border-radius: 25px;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.4),
                inset 0 -2px 10px rgba(0,0,0,0.2),
                inset 0 2px 10px rgba(255,255,255,0.5);
            border: 5px solid #a0a0a0;
            transform: translateZ(-20px);
        }

        [data-theme="dark"] .incubator-base {
            background: linear-gradient(145deg, #3a3a3a 0%, #2a2a2a 50%, #1a1a1a 100%);
            border-color: #555;
        }

        .base-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            height: 60px;
            background: linear-gradient(to bottom, #2c3e50 0%, #34495e 100%);
            border-radius: 10px;
            box-shadow: 
                0 5px 15px rgba(0,0,0,0.3),
                inset 0 1px 3px rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 15px;
        }

        .control-led {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
            animation: blink-led 2s infinite;
        }

        .led-green { background: #00ff00; color: #00ff00; }
        .led-yellow { background: #ffff00; color: #ffff00; animation-delay: 0.5s; }
        .led-blue { background: #0080ff; color: #0080ff; animation-delay: 1s; }

        @keyframes blink-led {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .incubator-dome {
            width: 400px;
            height: 220px;
            position: absolute;
            top: 30px;
            left: 10px;
            background: linear-gradient(
                to bottom,
                rgba(180, 220, 255, 0.08) 0%,
                rgba(180, 220, 255, 0.12) 50%,
                rgba(180, 220, 255, 0.15) 100%
            );
            border-radius: 200px 200px 25px 25px;
            border: 4px solid rgba(100, 150, 200, 0.4);
            backdrop-filter: blur(1px);
            box-shadow: 
                inset 0 10px 30px rgba(255,255,255,0.3),
                inset 0 -10px 30px rgba(0,0,0,0.05),
                0 10px 40px rgba(0,0,0,0.2);
            transform: translateZ(10px);
            overflow: visible;
            z-index: 6;
        }

        .glass-reflection {
            position: absolute;
            top: 10px;
            left: 30px;
            width: 150px;
            height: 120px;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 60%);
            border-radius: 50%;
            transform: rotate(-20deg);
            filter: blur(5px);
        }

        .glass-reflection-2 {
            position: absolute;
            bottom: 20px;
            right: 40px;
            width: 100px;
            height: 80px;
            background: linear-gradient(225deg, rgba(255,255,255,0.3) 0%, transparent 60%);
            border-radius: 50%;
            transform: rotate(15deg);
            filter: blur(3px);
        }

        .baby-3d {
            width: 120px;
            height: 120px;
            position: absolute;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(5px);
            font-size: 100px;
            animation: breathe3d 3.5s ease-in-out infinite;
            filter: drop-shadow(0 8px 15px rgba(0,0,0,0.4));
            z-index: 5;
        }

        @keyframes breathe3d {
            0%, 100% { 
                transform: translate(-50%, -50%) translateZ(5px) scale(1); 
            }
            50% { 
                transform: translate(-50%, -50%) translateZ(5px) scale(1.03); 
            }
        }

        .baby-blanket {
            position: absolute;
            top: 65%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 30px;
            background: linear-gradient(to right, #e3f2fd, #bbdefb, #90caf9);
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 4;
        }

        .incubator-mattress {
            position: absolute;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%) translateZ(-5px);
            width: 340px;
            height: 120px;
            background: linear-gradient(to bottom, #fff8e1 0%, #ffecb3 100%);
            border-radius: 15px;
            box-shadow: 
                0 -2px 10px rgba(0,0,0,0.1),
                inset 0 2px 5px rgba(255,255,255,0.5),
                inset 0 -2px 5px rgba(0,0,0,0.1);
            border: 2px solid #ffd54f;
        }

        .mattress-lines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 30px,
                rgba(255,193,7,0.2) 30px,
                rgba(255,193,7,0.2) 31px
            );
        }

        .system-indicator {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: pulse-indicator 2.5s infinite;
            box-shadow: 
                0 0 20px rgba(0,0,0,0.4),
                inset 0 2px 5px rgba(255,255,255,0.3),
                inset 0 -2px 5px rgba(0,0,0,0.2);
            border: 3px solid rgba(255,255,255,0.4);
            transform-style: preserve-3d;
            z-index: 10;
            opacity: 0.5;
        }

        .system-indicator.active-system {
            opacity: 1;
            animation: pulse-indicator-active 2s infinite;
        }

        @keyframes pulse-indicator {
            0%, 100% { 
                transform: scale(1) translateZ(15px); 
                box-shadow: 
                    0 0 20px rgba(0,0,0,0.4),
                    0 0 30px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
            50% { 
                transform: scale(1.08) translateZ(20px); 
                box-shadow: 
                    0 0 30px rgba(0,0,0,0.5),
                    0 0 50px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
        }

        @keyframes pulse-indicator-active {
            0%, 100% { 
                transform: scale(1) translateZ(15px); 
                box-shadow: 
                    0 0 30px rgba(0,0,0,0.5),
                    0 0 60px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
            50% { 
                transform: scale(1.15) translateZ(25px); 
                box-shadow: 
                    0 0 40px rgba(0,0,0,0.6),
                    0 0 80px currentColor,
                    inset 0 2px 5px rgba(255,255,255,0.3);
            }
        }

        .system-indicator:hover {
            transform: scale(1.4) translateZ(25px) !important;
            z-index: 20;
            animation: none;
        }

        .indicator-heating {
            background: radial-gradient(circle, #ff6b6b, #ff5252);
            color: #ff6b6b;
            top: 68%;
            left: 8%;
        }

        .indicator-humidity {
            background: radial-gradient(circle, #4fc3f7, #29b6f6);
            color: #4fc3f7;
            top: 68%;
            right: 8%;
        }

        .indicator-oxygen {
            background: radial-gradient(circle, #81c784, #66bb6a);
            color: #81c784;
            top: 25%;
            left: 12%;
        }

        .indicator-light-normal {
            background: radial-gradient(circle, #fff176, #ffeb3b);
            color: #fff176;
            top: 8%;
            left: 50%;
            transform: translateX(-50%) translateZ(15px);
        }

        .indicator-light-jaundice {
            background: radial-gradient(circle, #ffb74d, #ffa726);
            color: #ffb74d;
            top: 8%;
            left: 28%;
        }

        .indicator-light-uv {
            background: radial-gradient(circle, #9575cd, #7e57c2);
            color: #9575cd;
            top: 8%;
            right: 28%;
        }

        .indicator-label {
            position: absolute;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(30,30,30,0.9));
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 100;
            top: -45px;
            left: 50%;
            transform: translateX(-50%) translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .indicator-label::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid rgba(0,0,0,0.9);
        }

        .system-indicator:hover .indicator-label {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .light-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 200px 200px 25px 25px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.8s ease;
            mix-blend-mode: lighten;
            z-index: 8;
        }

        .light-effect.active {
            opacity: 1 !important;
        }

        .light-normal {
            background: 
                radial-gradient(ellipse at 50% 10%, rgba(255, 255, 220, 0.9) 0%, rgba(255, 255, 200, 0.6) 30%, transparent 60%),
                radial-gradient(ellipse at 50% 30%, rgba(255, 250, 200, 0.5) 0%, transparent 70%);
            animation: flicker-light 3s ease-in-out infinite;
        }

        .light-normal.active {
            box-shadow: 
                inset 0 0 100px rgba(255, 255, 200, 0.6),
                0 0 50px rgba(255, 255, 200, 0.4);
        }

        @keyframes flicker-light {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(0.95); }
        }

        .light-jaundice {
            background: 
                radial-gradient(ellipse at 50% 5%, rgba(255, 200, 0, 1) 0%, rgba(255, 220, 80, 0.8) 25%, rgba(255, 220, 100, 0.6) 40%, transparent 70%),
                radial-gradient(ellipse at 50% 30%, rgba(255, 180, 0, 0.7) 0%, rgba(255, 200, 50, 0.4) 40%, transparent 60%),
                radial-gradient(ellipse at 30% 20%, rgba(255, 200, 0, 0.5) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 20%, rgba(255, 200, 0, 0.5) 0%, transparent 50%);
            animation: pulse-jaundice 2s ease-in-out infinite;
        }

        .light-jaundice.active {
            box-shadow: 
                inset 0 0 120px rgba(255, 200, 0, 0.8),
                0 0 80px rgba(255, 200, 0, 0.6);
        }

        @keyframes pulse-jaundice {
            0%, 100% { filter: brightness(1) saturate(1.2); }
            50% { filter: brightness(1.1) saturate(1.4); }
        }

        .light-uv {
            background: 
                radial-gradient(ellipse at 50% 5%, rgba(150, 100, 255, 1) 0%, rgba(170, 130, 255, 0.9) 20%, rgba(180, 140, 255, 0.7) 35%, transparent 65%),
                radial-gradient(ellipse at 50% 25%, rgba(130, 90, 230, 0.8) 0%, rgba(160, 120, 250, 0.5) 35%, transparent 55%),
                radial-gradient(ellipse at 30% 15%, rgba(150, 100, 255, 0.6) 0%, transparent 40%),
                radial-gradient(ellipse at 70% 15%, rgba(150, 100, 255, 0.6) 0%, transparent 40%);
            animation: pulse-uv 1.8s ease-in-out infinite;
        }

        .light-uv.active {
            box-shadow: 
                inset 0 0 150px rgba(150, 100, 255, 0.9),
                0 0 100px rgba(150, 100, 255, 0.8);
        }

        @keyframes pulse-uv {
            0%, 100% { 
                filter: brightness(1.1) saturate(1.3);
            }
            50% { 
                filter: brightness(1.2) saturate(1.5);
            }
        }

        .light-beam {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 60px;
            background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.6));
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        .light-effect.active + .light-beam {
            opacity: 1;
        }

        .incubator-3d.rotating {
            animation: rotate3d 15s linear infinite;
        }

        @keyframes rotate3d {
            from { transform: translate(-50%, -50%) rotateX(20deg) rotateY(0deg); }
            to { transform: translate(-50%, -50%) rotateX(20deg) rotateY(360deg); }
        }

        .view-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .view-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .view-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .view-btn.active {
            background: var(--success);
        }

        /* ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä */
        .ai-model-info {
            display: grid;
            gap: 12px;
            margin-top: 15px;
        }

        .model-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--light);
            border-radius: 8px;
            border-right: 3px solid var(--primary);
        }

        [data-theme="dark"] .model-stat {
            background: #374151;
        }

        .model-label {
            font-weight: 600;
            opacity: 0.8;
            font-size: 0.9em;
        }

        .model-value {
            font-weight: bold;
            color: var(--primary);
            font-size: 0.95em;
        }

        .progress-container {
            margin: 15px 0;
        }

        .critical-prediction-card {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border);
            transition: all 0.3s;
        }

        [data-theme="dark"] .critical-prediction-card {
            background: #374151;
        }

        .critical-prediction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .risk-meter {
            width: 100%;
            height: 30px;
            background: linear-gradient(to right, 
                var(--success) 0%, 
                var(--success) 20%, 
                var(--warning) 20%, 
                var(--warning) 50%, 
                var(--danger) 50%, 
                var(--danger) 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }

        .risk-meter-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            transition: width 1s ease-out;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
        }

        .risk-meter::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(255,255,255,0.3), transparent);
            pointer-events: none;
        }

        .risk-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-right: 4px solid;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            transition: all 0.3s;
        }

        .risk-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .risk-low {
            background: rgba(16, 185, 129, 0.1);
            border-right-color: var(--success);
        }

        .risk-medium {
            background: rgba(245, 158, 11, 0.1);
            border-right-color: var(--warning);
        }

        .risk-high {
            background: rgba(239, 68, 68, 0.1);
            border-right-color: var(--danger);
        }

        .risk-icon {
            font-size: 2em;
            line-height: 1;
        }

        .risk-content {
            flex: 1;
        }

        .risk-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
            color: var(--text);
        }

        .risk-description {
            font-size: 0.9em;
            opacity: 0.8;
            line-height: 1.5;
        }

        .risk-probability {
            font-size: 1.5em;
            font-weight: bold;
            text-align: right;
            min-width: 60px;
        }

        .recommendation-item {
            padding: 15px;
            margin: 10px 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 10px;
            border-right: 4px solid var(--primary);
            display: flex;
            gap: 15px;
        }

        .recommendation-icon {
            font-size: 2em;
        }

        .recommendation-content {
            flex: 1;
        }

        .recommendation-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--primary);
            font-size: 1.05em;
        }

        .recommendation-text {
            font-size: 0.9em;
            line-height: 1.6;
            opacity: 0.9;
        }

        .recommendation-priority {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-top: 8px;
            display: inline-block;
        }

        .priority-high {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .priority-medium {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .priority-low {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .warning-item {
            padding: 15px;
            margin: 10px 0;
            background: rgba(239, 68, 68, 0.05);
            border-radius: 10px;
            border: 2px solid var(--danger);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: warning-pulse 2s infinite;
        }

        @keyframes warning-pulse {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
            }
            50% { 
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }
        }

        .warning-icon {
            font-size: 2em;
            color: var(--danger);
        }

        .warning-content {
            flex: 1;
        }

        .warning-title {
            font-weight: bold;
            color: var(--danger);
            margin-bottom: 5px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1em;
            background: var(--card-bg);
            color: var(--text);
        }

        .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            background: var(--card-bg);
            color: var(--text);
            transition: all 0.3s;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .theme-preview {
            background: var(--light);
            border-radius: 12px;
            margin: 20px 0;
            padding: 20px;
            border: 3px dashed var(--primary);
        }

        [data-theme="dark"] .theme-preview {
            background: #374151;
        }

        /* Responsive */
        @keyframes emergency-flash {
            0%, 100% { background: var(--bg); }
            50% { background: rgba(239, 68, 68, 0.2); }
        }

        @media (max-width: 768px) {
            .grid, .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .sensor-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                text-align: center;
            }
            
            .emergency-btn {
                width: 60px;
                height: 60px;
                bottom: 15px;
                left: 15px;
            }
        }

    </style>
</head>
<body data-theme="light">
    <div class="container">
         <!-- ÿ¥ÿπÿßÿ± ÿßŸÑÿ¨ÿßŸÖÿπÿ© ŸàŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ -->
            <div class="card" style="text-align: center; margin-bottom: 20px;">
                <div class="university-logo">
                   <img src="https://i.ibb.co/20dDFyW1/images.jpg" 
             alt="ÿ¥ÿπÿßÿ± ÿ¨ÿßŸÖÿπÿ© ŸÖÿµÿ∑ŸÅŸâ ÿßÿ≥ÿ∑ŸÖÿ®ŸàŸÑŸä - ŸÖÿπÿ≥ŸÉÿ±" 
             onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
             style="width: 150px; 
                    height: 150px; 
                    border-radius: 50%; 
                    margin: 20px auto; 
                    box-shadow: 0 8px 30px rgba(0,150,255,0.5);
                    border: 5px solid rgba(255,255,255,0.2);
                    background: white;
                    padding: 15px;
                    object-fit: contain;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                    display: block;"
             onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
             onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';">
    </div>
                <h2 style="color: var(--primary); font-size: 1.8em; margin: 15px 0;">ÿ¨ÿßŸÖÿπÿ© ŸÖÿµÿ∑ŸÅŸâ ÿßÿ≥ÿ∑ŸÖÿ®ŸàŸÑŸä -ŸÖÿπÿ≥ŸÉÿ±</h2>
                <h3 style="color: var(--secondary); font-size: 1.3em; margin: 10px 0;">D√©partement d'Electrotechnique</h3>
                <p style="font-size: 1.1em; opacity: 0.8; margin: 10px 0;">Conception et Prototypage d'un Incubateur N√©onatal: Utilisation au Sein du Service de P√©diatrie </p>
                <p style="font-size: 0.95em; opacity: 0.7;">Electronique Systeme Embarque| ŸÖÿ¥ÿ±Ÿàÿπ ÿ™ÿÆÿ±ÿ¨ 2025-2026</p>
            </div>

            <!-- ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÅÿ±ŸäŸÇ -->
            <div class="card">
                <h3 class="card-title">üë• ŸÅÿ±ŸäŸÇ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                    <!-- ÿπÿ∂Ÿà 1 -->
                    <div class="team-member">
                      <img src="https://imgur.com/whd4s8B.jpg" 
             alt="ÿµŸàÿ±ÿ© ÿ¥ÿÆÿµŸäÿ©" 
             onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
             style="width: 150px; 
                    height: 150px; 
                    border-radius: 50%; 
                    margin: 20px auto; 
                    box-shadow: 0 8px 30px rgba(0,150,255,0.5);
                    border: 5px solid rgba(255,255,255,0.2);
                    background: white;
                    padding: 15px;
                    object-fit: contain;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                    display: block;"
             onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
             onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';">
    
                        <div class="member-avatar"></div>
                        <h4>Kada Fatima Zohra</h4>
                        <p class="member-role">√©tudiant</p>
                        <div class="member-info">
                            <div>üìß <a href="/cdn-cgi/l/email-protection#9bf0fafffafdfaeff2f6fae1f4f3e9faacaadbfcf6faf2f7b5f8f4f6" style="color: var(--primary); text-decoration: none;"><span class="__cf_email__" data-cfemail="254e4441444344514c48445f4a4d57441214654248444c490b464a48">[email&#160;protected]</span></a></div>
                           
                          <div>üéì *Electronique Systeme Embarque </div>
                        </div>
                        
                    </div>

                    <!-- ÿπÿ∂Ÿà 2 -->
                    <div class="team-member">
                        <div class="member-avatar"></div>
                        <img src="https://imgur.com/dRfAwUB.jpg" 
             alt="ÿµŸàÿ±ÿ© ÿ¥ÿÆÿµŸäÿ©" 
             onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
             style="width: 150px; 
                    height: 150px; 
                    border-radius: 50%; 
                    margin: 20px auto; 
                    box-shadow: 0 8px 30px rgba(0,150,255,0.5);
                    border: 5px solid rgba(255,255,255,0.2);
                    background: white;
                    padding: 15px;
                    object-fit: contain;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                    display: block;"
             onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
             onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';">
    
                        <h4>Chabane Hibet Rahmane</h4>
                        <p class="member-role">√©tudiant</p>
                        <div class="member-info">
                          <div>üìß <a href="/cdn-cgi/l/email-protection#036e6a6e6c766d6a613a333043646e626a6f2d606c6e" style="color: var(--primary); text-decoration: none;"><span class="__cf_email__" data-cfemail="d5b8bcb8baa0bbbcb7ece5e695b2b8b4bcb9fbb6bab8">[email&#160;protected]</span></a></div>
                            
                            <div>üéì Electronique Systeme Embarque</div>
                        </div>
                        
                    </div>

                    <!-- ÿπÿ∂Ÿà 3 -->
                    <div class="team-member">
                        <div class="member-avatar"></div>
                        <img src="https://imgur.com/ywldGVU.jpg" 
             alt="ÿµŸàÿ±ÿ© ÿ¥ÿÆÿµŸäÿ©" 
             onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
             style="width: 150px; 
                    height: 150px; 
                    border-radius: 50%; 
                    margin: 20px auto; 
                    box-shadow: 0 8px 30px rgba(0,150,255,0.5);
                    border: 5px solid rgba(255,255,255,0.2);
                    background: white;
                    padding: 15px;
                    object-fit: contain;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                    display: block;"
             onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
             onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';">
    
                        <h4>Boudjoras Meriem </h4>
                        <p class="member-role">√©tudiant</p>
                        <div class="member-info">
                          <div>üìß <a href="/cdn-cgi/l/email-protection#4a272f2d2e2b2e272f2d2e2b2e7e0a2d272b232664292527" style="color: var(--primary); text-decoration: none;"><span class="__cf_email__" data-cfemail="5d30383a393c3930383a393c39691d3a303c3431733e3230">[email&#160;protected]</span></a></div>
                           
                            <div>üéìElectronique Systeme Embarque </div>
                        </div>
                        
                    </div>

                        
                    </div>
                </div>
            </div>

            <!-- ÿßŸÑÿ£ÿ≥ÿßÿ™ÿ∞ÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅŸàŸÜ -->
            <div class="card">
                <h3 class="card-title">üë®‚Äçüè´ ÿßŸÑÿ£ÿ≥ÿßÿ™ÿ∞ÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅŸàŸÜ</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
                    <!-- ŸÖÿ¥ÿ±ŸÅ 1 -->
                    <div class="supervisor-card">
                        <div class="supervisor-avatar"></div>
                      <img src="https://imgur.com/Ydo3qPq.jpg" 
             alt="ÿµŸàÿ±ÿ© ÿ¥ÿÆÿµŸäÿ©" 
             onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
             style="width: 150px; 
                    height: 150px; 
                    border-radius: 50%; 
                    margin: 20px auto; 
                    box-shadow: 0 8px 30px rgba(0,150,255,0.5);
                    border: 5px solid rgba(255,255,255,0.2);
                    background: white;
                    padding: 15px;
                    object-fit: contain;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                    display: block;"
             onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
             onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';">
    
                        <h4>Dr.hebali mourad</h4>
                        <p class="supervisor-title">PhD in Electrical Engineering Professor (Associate)</p>
                        <div class="supervisor-info">
                            <div>üèõÔ∏è ÿ¨ÿßŸÖÿπÿ© ŸÖÿπÿ≥ŸÉÿ± ŸÑŸÑÿπŸÑŸàŸÖ ŸàÿßŸÑÿ™ŸÉŸÜŸàŸÑŸàÿ¨Ÿäÿß</div>
                            <div>üìß <a href="/cdn-cgi/l/email-protection#167e7374777a7f7b7963647772566f777e7979387064" style="color: var(--primary); text-decoration: none;"><span class="__cf_email__" data-cfemail="6b030e090a070206041e190a0f2b120a030404450d19">[email&#160;protected]</span></a></div>
                            <div>üìß <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4e23213b3c2f2a60262b2c2f22270e3b20273863232f3d2d2f3c2f602a34">[email&#160;protected]</a></div>
                            <div>Grade : Ma√Ætre Assistant classe B (MCB)                        </div>
                        <div class="expertise">
                           <div class="social-links">
                            <a href="https://www.linkedin.com/in/mourad-hebali-10196675/" target="_blank" class="social-btn">linkedin</a>
                            </div>
                        </div>
                    </div>

                    </div>
                </div>
            </div>

        <!-- ÿßŸÑŸáŸäÿØÿ± -->
        <div class="header">
            <div class="header-left">
                <span style="font-size: 2.5em;">üë∂</span>
                <div>
                    <h1>Conception et Prototypage d'un Incubateur N√©onatal: Utilisation au Sein du Service de P√©diatrie</h1>
                    <span style="opacity: 0.7; font-size: 0.9em;">NICU Smart Incubator Pro - ŸÜÿ∏ÿßŸÖ ÿ≠ŸÇŸäŸÇŸä</span>
                </div>
            </div>
            <div class="header-right">
                <div class="status-badges">
                    <span class="badge badge-offline" id="connectionBadge">‚óè ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ</span>
                    <span class="badge" id="statusBadge" style="background: #6b7280; color: white;">‚è∏ ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
            </div>
        </div>

        <!-- ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© -->
        <div class="connection-status disconnected" id="mainConnectionStatus">
            <div style="font-size: 3em; margin-bottom: 10px;">üì°</div>
            <h2 style="margin-bottom: 10px; color: var(--danger);">ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ŸÄ Arduino</h2>
            <p style="opacity: 0.8; margin-bottom: 20px;">
                ÿßŸÑŸÜÿ∏ÿßŸÖ ŸäÿπŸÖŸÑ ŸÅŸÇÿ∑ ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸäÿ© ŸÖŸÜ Arduino.<br>
                ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿ¨Ÿáÿßÿ≤ Arduino ÿ£ŸàŸÑÿßŸã ŸÖŸÜ ÿ™ÿ®ŸàŸäÿ® "Arduino/ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™".
            </p>
            <button class="control-btn btn-primary" onclick="switchTab('arduino')" style="max-width: 300px; margin: 0 auto;">
                <span>üîå</span>
                ÿßŸÑÿ∞Ÿáÿßÿ® ÿ•ŸÑŸâ ÿµŸÅÿ≠ÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ
            </button>
        </div>

       

        <!-- ÿßŸÑÿ™ÿ®ŸàŸäÿ®ÿßÿ™ -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('monitoring')">üìä ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ≠Ÿäÿ©</button>
            <button class="tab" onclick="switchTab('control')">‚öôÔ∏è ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸàÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</button>
            <button class="tab" onclick="switchTab('ai')">ü§ñ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿßŸÑÿ∑ÿ®Ÿä</button>
            <button class="tab" onclick="switchTab('charts')">üìà ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ©</button>
            <button class="tab" onclick="switchTab('alerts')">üö® ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™</button>
            <button class="tab" onclick="switchTab('arduino')">üîå Arduino/ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</button>
            <button class="tab" onclick="switchTab('settings')">üîß ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</button>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© -->
        <div id="monitoring" class="tab-content active">
            <div class="grid">
                 <!-- ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂ -->
        <div class="patient-info">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="margin: 0;">üìã ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂</h2>
                <button id="editPatientBtn" class="control-btn btn-primary" onclick="toggleEditPatient()" style="padding: 8px 16px; font-size: 0.9em;">
                    <span id="editIcon">‚úèÔ∏è</span>
                    <span id="editText">ÿ™ÿπÿØŸäŸÑ</span>
                </button>
            </div>
            <div class="patient-details">
                <div class="patient-field">
                    <span class="patient-label">ÿßŸÑÿßÿ≥ŸÖ:</span>
                    <span class="patient-value" id="patientName">ÿ∑ŸÅŸÑ ÿ±ÿ∂Ÿäÿπ - 001</span>
                    <input type="text" id="patientNameEdit" class="patient-edit-input" style="display: none;" value="ÿ∑ŸÅŸÑ ÿ±ÿ∂Ÿäÿπ - 001">
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸàŸÑÿßÿØÿ©:</span>
                    <span class="patient-value" id="patientBirthDate">01/02/2026</span>
                    <input type="date" id="patientBirthDateEdit" class="patient-edit-input" style="display: none;" value="2026-02-01">
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿπŸÖÿ± ÿßŸÑÿ≠ŸÖŸÑ:</span>
                    <span class="patient-value" id="patientGestationalAge">32 ÿ£ÿ≥ÿ®Ÿàÿπ</span>
                    <input type="text" id="patientGestationalAgeEdit" class="patient-edit-input" style="display: none;" value="32 ÿ£ÿ≥ÿ®Ÿàÿπ">
                </div>
                <div class="patient-field">
                    <span class="patient-label">ŸÖÿØÿ© ÿßŸÑÿ•ŸÇÿßŸÖÿ©:</span>
                    <span class="patient-value" id="patientStayDuration">5 ÿ£ŸäÿßŸÖ</span>
                    <input type="text" id="patientStayDurationEdit" class="patient-edit-input" style="display: none;" value="5 ÿ£ŸäÿßŸÖ">
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑÿ≠ÿßŸÑŸä:</span>
                    <span class="patient-value" id="currentWeight">-- ŸÉÿ¨ŸÖ</span>
                    <input type="text" id="currentWeightEdit" class="patient-edit-input" style="display: none;" value="-- ŸÉÿ¨ŸÖ">
                </div>
                <div class="patient-field">
                    <span class="patient-label">ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´:</span>
                    <span class="patient-value" id="lastUpdate">--</span>
                </div>
            </div>
        </div>
                <!-- ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>ü´Ä</span>
                        ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ©
                    </div>
                    <div class="sensor-grid">
                        <div class="sensor-item">
                            <div class="sensor-icon">üå°Ô∏è</div>
                            <div class="sensor-value" id="bodyTemp">--</div>
                            <div class="sensor-label">ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ¬∞C</div>
                            <span class="sensor-status" id="tempStatus">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">‚ù§Ô∏è</div>
                            <div class="sensor-value" id="heartRate">--</div>
                            <div class="sensor-label">ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ® / ÿØŸÇŸäŸÇÿ©</div>
                            <span class="sensor-status" id="heartStatus">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">ü´Å</div>
                            <div class="sensor-value" id="oxygenLevel">--</div>
                            <div class="sensor-label">ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ SpO2 %</div>
                            <span class="sensor-status" id="oxygenStatus">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">üå¨Ô∏è</div>
                            <div class="sensor-value" id="respRate">--</div>
                            <div class="sensor-label">ŸÖÿπÿØŸÑ ÿßŸÑÿ™ŸÜŸÅÿ≥ / ÿØŸÇŸäŸÇÿ©</div>
                            <span class="sensor-status" id="respStatus">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÑÿ®Ÿäÿ¶ÿ© ÿßŸÑÿØÿßÿÆŸÑŸäÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>üè†</span>
                        ÿßŸÑÿ®Ÿäÿ¶ÿ© ÿßŸÑÿØÿßÿÆŸÑŸäÿ©
                    </div>
                    <div class="sensor-grid">
                        <div class="sensor-item">
                            <div class="sensor-icon">üíß</div>
                            <div class="sensor-value" id="humidity">--</div>
                            <div class="sensor-label">ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© %</div>
                            <span class="sensor-status" id="humidityStatus">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">‚öñÔ∏è</div>
                            <div class="sensor-value" id="weight">--</div>
                            <div class="sensor-label">ÿßŸÑŸàÿ≤ŸÜ ŸÉÿ¨ŸÖ</div>
                            <span class="sensor-status" id="weightStatus">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">üå°Ô∏è</div>
                            <div class="sensor-value" id="envTemp">--</div>
                            <div class="sensor-label">ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ¬∞C</div>
                            <span class="sensor-status" id="envTempStatus">ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</span>
                        </div>
                        <div class="sensor-item">
                            <div class="sensor-icon">‚è±Ô∏è</div>
                            <div class="sensor-value" id="dataAge">--</div>
                            <div class="sensor-label">ÿ¢ÿÆÿ± ŸÇÿ±ÿßÿ°ÿ©</div>
                            <span class="sensor-status">ÿ´ÿßŸÜŸäÿ©</span>
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ÿ¶Ÿä -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üëÅÔ∏è</span>
                        ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ÿ¶Ÿä ŸÑŸÑÿ≠ÿßÿ∂ŸÜÿ©
                    </div>
                    <div class="incubator-visual">
                        <div class="incubator-overlay">
                            <span>üå°Ô∏è <strong id="visualTemp">-- ¬∞C</strong></span>
                            <span>üíß <strong id="visualHumidity">-- %</strong></span>
                            <span>‚ù§Ô∏è <strong id="visualHeart">-- bpm</strong></span>
                            <span>ü´Å <strong id="visualOxygen">-- %</strong></span>
                        </div>
                        <div class="baby-icon">üë∂</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ™ÿ≠ŸÉŸÖ -->
             
        <div id="control" class="tab-content">
            <!-- ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸä ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ -->
            <div class="card" style="grid-column: 1 / -1; margin-bottom: 20px;">
                <div class="card-title">
                    <span>üé®</span>
                    ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸä ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ - ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿßŸÑŸàÿßŸÇÿπŸäÿ©
                </div>
                <div class="d3-viewer-container">
                    <div class="d3-canvas" id="d3CanvasControl">
                        <div class="floor-shadow"></div>
                        
                        <div class="incubator-3d" id="incubator3dControl">
                            <div class="incubator-base">
                                <div class="base-panel">
                                    <div class="control-led led-green" id="ledPower"></div>
                                    <div class="control-led led-yellow" id="ledWarning"></div>
                                    <div class="control-led led-blue" id="ledSystem"></div>
                                    <div style="color: white; font-size: 10px; font-weight: bold;">NICU PRO</div>
                                </div>
                            </div>
                            
                            <div class="incubator-mattress">
                                <div class="mattress-lines"></div>
                            </div>
                            
                            <div class="baby-blanket"></div>
                            <div class="baby-3d">üë∂</div>
                            
                            <div class="incubator-dome" id="incubatorDomeControl">
                                <div class="glass-reflection"></div>
                                <div class="glass-reflection-2"></div>
                                
                                <div class="light-effect light-normal" id="lightNormalControl"></div>
                                <div class="light-beam"></div>
                                
                                <div class="light-effect light-jaundice" id="lightJaundiceControl"></div>
                                <div class="light-beam"></div>
                                
                                <div class="light-effect light-uv" id="lightUVControl"></div>
                                <div class="light-beam"></div>
                            </div>
                            
                            <div class="system-indicator indicator-heating active-system" id="heatingIndicator">
                                <span>üî•</span>
                                <div class="indicator-label">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿØŸÅÿ¶ÿ©</div>
                            </div>
                            
                            <div class="system-indicator indicator-humidity active-system" id="humidityIndicator">
                                <span>üíß</span>
                                <div class="indicator-label">ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ®</div>
                            </div>
                            
                            <div class="system-indicator indicator-oxygen active-system" id="oxygenIndicator">
                                <span>ü´Å</span>
                                <div class="indicator-label">ÿ•ŸÖÿØÿßÿØ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ</div>
                            </div>
                            
                            <div class="system-indicator indicator-light-normal active-system" id="normalLightIndicator">
                                <span>üí°</span>
                                <div class="indicator-label">ÿ•ÿ∂ÿßÿ°ÿ© ÿπÿßÿØŸäÿ©</div>
                            </div>
                            
                            <div class="system-indicator indicator-light-jaundice" id="jaundiceLightIndicator">
                                <span>üü°</span>
                                <div class="indicator-label">ÿπŸÑÿßÿ¨ ÿ∂Ÿàÿ¶Ÿä</div>
                            </div>
                            
                            <div class="system-indicator indicator-light-uv" id="uvLightIndicator">
                                <span>üîµ</span>
                                <div class="indicator-label">ÿ™ÿπŸÇŸäŸÖ UV-C</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="view-controls">
                        <button class="view-btn" onclick="toggleRotationControl()">
                            <span id="rotationIconControl">üîÑ</span>
                            <span id="rotationTextControl">ÿØŸàÿ±ÿßŸÜ ÿ™ŸÑŸÇÿßÿ¶Ÿä</span>
                        </button>
                        <button class="view-btn" onclick="resetViewControl()">
                            <span>üîÉ</span>
                            ÿ•ÿπÿßÿØÿ© ÿ∂ÿ®ÿ∑ ÿßŸÑÿπÿ±ÿ∂
                        </button>
                    </div>
                </div>
            </div>

            <div class="grid">
                <!-- ÿßŸÑÿ™ÿØŸÅÿ¶ÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>üî•</span>
                        ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿØŸÅÿ¶ÿ©
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿØŸÅÿ¶ÿ©</strong></span>
                        <label class="switch">
                            <input type="checkbox" id="heatingSwitch" disabled>
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅÿ©</span>
                            <span class="slider-value" id="heatingTempValue">36.5¬∞C</span>
                        </div>
                        <input type="range" class="slider" min="32" max="37" step="0.5" value="36.5" 
                               id="heatingTemp" oninput="updateHeatingTemp(this.value)" disabled>
                    </div>
                    <div style="background: #fff3cd; padding: 12px; border-radius: 8px; margin-top: 10px; border-right: 4px solid #ffc107;">
                        <small style="color: #856404;">
                            ‚ö†Ô∏è Ÿäÿ™ÿ∑ŸÑÿ® ÿßÿ™ÿµÿßŸÑ Arduino ŸÜÿ¥ÿ∑ ŸÑŸÑÿ™ÿ≠ŸÉŸÖ
                        </small>
                    </div>
                </div>

                <!-- ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ® -->
                <div class="card">
                    <div class="card-title">
                        <span>üí¶</span>
                        ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ®
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ±ÿ∑Ÿäÿ®</strong></span>
                        <label class="switch">
                            <input type="checkbox" id="humidifierSwitch" disabled>
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ</span>
                            <span class="slider-value" id="humidityTargetValue">55%</span>
                        </div>
                        <input type="range" class="slider" min="40" max="70" step="5" value="55" 
                               id="humidityTarget" oninput="updateHumidityTarget(this.value)" disabled>
                    </div>
                </div>

                <!-- ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ -->
                <div class="card">
                    <div class="card-title">
                        <span>ü´Å</span>
                        ÿ•ŸÖÿØÿßÿØ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ</strong></span>
                        <label class="switch">
                            <input type="checkbox" id="oxygenSwitch" disabled>
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ™ÿ±ŸÉŸäÿ≤ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ</span>
                            <span class="slider-value" id="oxygenLevelValue">30%</span>
                        </div>
                        <input type="range" class="slider" min="21" max="100" step="1" value="30" 
                               id="oxygenLevelControl" oninput="updateOxygenLevel(this.value)" disabled>
                    </div>
                </div>

                <!-- ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ© -->
                <div class="card">
                    <div class="card-title">
                        <span>üí°</span>
                        ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ©</strong></span>
                        <label class="switch">
                            <input type="checkbox" checked id="normalLightSwitch" onchange="toggleNormalLight(this.checked)" disabled>
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ¥ÿØÿ© ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ©</span>
                            <span class="slider-value" id="normalLightValue">50%</span>
                        </div>
                        <input type="range" class="slider" min="0" max="100" step="10" value="50" 
                               id="normalLightIntensity" oninput="updateNormalLightIntensity(this.value)" disabled>
                    </div>
                    <div style="background: #fff9e6; padding: 12px; border-radius: 8px; margin-top: 10px; border-right: 4px solid #ffc107;">
                        <small style="color: #856404;">
                            üí° <strong>ŸÖÿπŸÑŸàŸÖÿ©:</strong> ÿ•ÿ∂ÿßÿ°ÿ© LED ÿ®Ÿäÿ∂ÿßÿ° ÿØÿßŸÅÿ¶ÿ© ŸÑÿ™ŸàŸÅŸäÿ± ÿ®Ÿäÿ¶ÿ© ŸÖÿ±Ÿäÿ≠ÿ© ŸÑŸÑÿ∑ŸÅŸÑ.
                        </small>
                    </div>
                </div>

                <!-- ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä ŸÑŸÑŸäÿ±ŸÇÿßŸÜ -->
                <div class="card">
                    <div class="card-title">
                        <span>üü°</span>
                        ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä (ÿßŸÑŸäÿ±ŸÇÿßŸÜ/ÿßŸÑÿµŸÅÿßÿ±)
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ∂Ÿàÿ° ÿßŸÑÿ£ÿµŸÅÿ±</strong></span>
                        <label class="switch">
                            <input type="checkbox" id="jaundiceSwitch" onchange="toggleJaundiceLight(this.checked)" disabled>
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ¥ÿØÿ© ÿßŸÑÿ∂Ÿàÿ° ÿßŸÑÿ£ÿµŸÅÿ± (450-470 nm)</span>
                            <span class="slider-value" id="jaundiceLightValue">60%</span>
                        </div>
                        <input type="range" class="slider" min="0" max="100" step="10" value="60" 
                               id="jaundiceLightIntensity" oninput="updateJaundiceLightIntensity(this.value)" disabled>
                    </div>
                    <div style="background: #fff3cd; padding: 12px; border-radius: 8px; margin-top: 10px; border-right: 4px solid #ffc107;">
                        <small style="color: #856404;">
                            ‚ö†Ô∏è <strong>ÿ™ŸÜÿ®ŸäŸá ÿ∑ÿ®Ÿä:</strong> Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿπŸÑÿßÿ¨ ÿßŸÑŸäÿ±ŸÇÿßŸÜ ÿßŸÑŸàŸÑŸäÿØŸä. ÿßŸÑÿ∑ŸàŸÑ ÿßŸÑŸÖŸàÿ¨Ÿä 450-470nm.
                        </small>
                    </div>
                </div>

                <!-- ÿ™ÿπŸÇŸäŸÖ UV-C -->
                <div class="card">
                    <div class="card-title">
                        <span>üîµ</span>
                        ÿ™ÿπŸÇŸäŸÖ UV-C (ÿßŸÑÿ£ÿ¥ÿπÿ© ŸÅŸàŸÇ ÿßŸÑÿ®ŸÜŸÅÿ≥ÿ¨Ÿäÿ©)
                    </div>
                    <div class="switch-container">
                        <span><strong>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿπŸÇŸäŸÖ</strong></span>
                        <label class="switch">
                            <input type="checkbox" id="uvSwitch" onchange="toggleUVSterilization(this.checked)" disabled>
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ŸÖÿØÿ© ÿßŸÑÿ™ÿπŸÇŸäŸÖ (ÿØŸÇÿßÿ¶ŸÇ)</span>
                            <span class="slider-value" id="uvDurationValue">15 ÿØ</span>
                        </div>
                        <input type="range" class="slider" min="5" max="60" step="5" value="15" 
                               id="uvDuration" oninput="updateUVDuration(this.value)" disabled>
                    </div>
                    <div style="background: #ffebee; padding: 12px; border-radius: 8px; margin-top: 10px; border-right: 4px solid #ef4444;">
                        <small style="color: #c62828;">
                            ‚ö†Ô∏è <strong>ÿ™ÿ≠ÿ∞Ÿäÿ± ÿ£ŸÖÿßŸÜ ÿ≠ÿ±ÿ¨:</strong> Ÿäÿ¨ÿ® ÿ•ÿÆŸÑÿßÿ° ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ™ŸÖÿßŸÖÿßŸã ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿπŸÇŸäŸÖ! ÿßŸÑÿ£ÿ¥ÿπÿ© UV-C (254nm) ÿÆÿ∑ÿ±ÿ© ÿ¨ÿØÿßŸã.
                        </small>
                    </div>
                </div>

                <!-- ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿπ -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>‚ö°</span>
                        ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿπ
                    </div>
                    <div class="control-buttons">
                        <button class="control-btn btn-success" onclick="quickPreset('normal')" disabled id="btnNormal">
                            <span>‚úì</span>
                            Ÿàÿ∂ÿπ ÿπÿßÿØŸä
                        </button>
                        <button class="control-btn btn-primary" onclick="quickPreset('intensive')" disabled id="btnIntensive">
                            <span>‚ö°</span>
                            Ÿàÿ∂ÿπ ŸÖŸÉÿ´ŸÅ
                        </button>
                        <button class="control-btn btn-warning" onclick="quickPreset('phototherapy')" disabled id="btnPhoto">
                            <span>üí°</span>
                            ÿπŸÑÿßÿ¨ ÿ∂Ÿàÿ¶Ÿä
                        </button>
                        <button class="control-btn btn-danger" onclick="emergencyStop()" disabled id="btnEmergency">
                            <span>‚è∏Ô∏è</span>
                            ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿßŸÑÿ∑ÿ®Ÿä -->
        <div id="ai" class="tab-content">
            <div class="card" style="grid-column: 1 / -1; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white;">
                <div class="card-title" style="color: white; border-bottom-color: rgba(255,255,255,0.3);">
                    <span>üß†</span>
                    ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÑŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑÿ∑ÿ®Ÿäÿ©
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                        <div style="font-size: 2.5em; margin-bottom: 5px;" id="aiHealthScore">--</div>
                        <div style="font-size: 0.9em; opacity: 0.9;">ÿØÿ±ÿ¨ÿ© ÿßŸÑÿµÿ≠ÿ© ÿßŸÑÿπÿßŸÖÿ©</div>
                        <div style="font-size: 0.75em; margin-top: 5px; opacity: 0.7;">ŸÖŸÜ 100</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                        <div style="font-size: 2.5em; margin-bottom: 5px;" id="aiRiskLevel">--</div>
                        <div style="font-size: 0.9em; opacity: 0.9;">ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©</div>
                        <div style="font-size: 0.75em; margin-top: 5px; opacity: 0.7;">ÿ™ÿ≠ŸÑŸäŸÑ ŸÅŸàÿ±Ÿä</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                        <div style="font-size: 2.5em; margin-bottom: 5px;" id="aiAccuracy">98%</div>
                        <div style="font-size: 0.9em; opacity: 0.9;">ÿØŸÇÿ© ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨</div>
                        <div style="font-size: 0.75em; margin-top: 5px; opacity: 0.7;">ŸÖÿπÿ™ŸÖÿØ ÿ∑ÿ®ŸäÿßŸã</div>
                    </div>
                </div>
                <button class="control-btn btn-success" onclick="runAIAnalysis()" style="margin-top: 20px; width: 100%;" disabled id="btnAIAnalysis">
                    <span>üî¨</span>
                    ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ ÿßŸÑÿ¢ŸÜ
                </button>
            </div>

            <div class="grid">
                <div class="card">
                    <div class="card-title">
                        <span>‚ö†Ô∏è</span>
                        ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ©
                    </div>
                    <div id="aiRiskPredictions">
                        <p style="text-align: center; opacity: 0.6; padding: 20px;">Ÿäÿ™ÿ∑ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Arduino</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">
                        <span>üí°</span>
                        ÿ™ŸàÿµŸäÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
                    </div>
                    <div id="aiRecommendations">
                        <p style="text-align: center; opacity: 0.6; padding: 20px;">Ÿäÿ™ÿ∑ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Arduino</p>
                    </div>
                </div>

                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üî¥</span>
                        ÿßŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©
                    </div>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                        <div class="critical-prediction-card">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="font-size: 2em;">ü¶†</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 1.1em;">ÿ™ÿπŸÅŸÜ ÿßŸÑÿØŸÖ (Sepsis)</div>
                                    <div style="font-size: 0.85em; opacity: 0.7;">ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿÆŸÑÿßŸÑ 24 ÿ≥ÿßÿπÿ©</div>
                                </div>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-meter-bar" id="sepsisRisk" style="width: 0%;"></div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 1.5em; font-weight: bold; color: var(--success);" id="sepsisPercent">--%</div>
                        </div>

                        <div class="critical-prediction-card">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="font-size: 2em;">ü´É</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 1.1em;">ÿßŸÑÿ™Ÿáÿßÿ® ÿßŸÑÿ£ŸÖÿπÿßÿ° (NEC)</div>
                                    <div style="font-size: 0.85em; opacity: 0.7;">ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿÆŸÑÿßŸÑ 48 ÿ≥ÿßÿπÿ©</div>
                                </div>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-meter-bar" id="necRisk" style="width: 0%;"></div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 1.5em; font-weight: bold; color: var(--success);" id="necPercent">--%</div>
                        </div>

                        <div class="critical-prediction-card">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="font-size: 2em;">ü´Å</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 1.1em;">ÿßŸÑÿ∂ÿßÿ¶ŸÇÿ© ÿßŸÑÿ™ŸÜŸÅÿ≥Ÿäÿ© (RDS)</div>
                                    <div style="font-size: 0.85em; opacity: 0.7;">ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ© ÿßŸÑÿ≠ÿßŸÑŸä</div>
                                </div>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-meter-bar" id="rdsRisk" style="width: 0%;"></div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 1.5em; font-weight: bold; color: var(--success);" id="rdsPercent">--%</div>
                        </div>
                    </div>
                </div>

                <!-- ŸÖÿ±ÿ®ÿπ ÿßŸÑÿØÿ±ÿØÿ¥ÿ© ŸÖÿπ AI ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∑ÿ®Ÿä -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="ai-chat-container">
                        <div class="ai-chat-header">
                            <span style="font-size: 2em;">ü§ñ</span>
                            <div>
                                <h3>ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∑ÿ®Ÿä ÿßŸÑÿ∞ŸÉŸä</h3>
                                <p style="margin: 0; font-size: 0.85em; opacity: 0.9;">ŸÖÿØÿπŸàŸÖ ÿ®ŸÄ Claude AI - ŸÖÿ™ÿÆÿµÿµ ŸÅŸä ÿ±ÿπÿßŸäÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿÆÿØÿ¨</p>
                            </div>
                            <div class="ai-status">
                                <div class="ai-status-dot"></div>
                                <span>ŸÖÿ™ÿµŸÑ</span>
                            </div>
                        </div>

                        <div class="ai-suggestions">
                            <div class="ai-suggestion-chip" onclick="sendSuggestion('ŸÖÿß ŸáŸä ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿ© ŸÑŸÑÿ∑ŸÅŸÑ ÿßŸÑÿÆÿØŸäÿ¨ÿü')">
                                üìä ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿ©
                            </div>
                            <div class="ai-suggestion-chip" onclick="sendSuggestion('ŸÉŸäŸÅ ÿ£ÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿßŸÜÿÆŸÅÿßÿ∂ ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜÿü')">
                                ü´Å ÿßŸÜÿÆŸÅÿßÿ∂ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ
                            </div>
                            <div class="ai-suggestion-chip" onclick="sendSuggestion('ŸÖÿß ÿ£ÿπÿ±ÿßÿ∂ ÿßŸÑŸäÿ±ŸÇÿßŸÜ ÿßŸÑŸàŸÑŸäÿØŸäÿü')">
                                üíõ ÿßŸÑŸäÿ±ŸÇÿßŸÜ ÿßŸÑŸàŸÑŸäÿØŸä
                            </div>
                            <div class="ai-suggestion-chip" onclick="sendSuggestion('ŸÜÿµÿßÿ¶ÿ≠ ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©')">
                                üå°Ô∏è ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©
                            </div>
                        </div>

                        <div class="ai-chat-messages" id="aiChatMessages">
                            <div class="ai-message ai">
                                <div class="ai-avatar">ü§ñ</div>
                                <div>
                                    <div class="ai-message-content">
                                        ŸÖÿ±ÿ≠ÿ®ÿßŸã! ÿ£ŸÜÿß ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∑ÿ®Ÿä ÿßŸÑÿ∞ŸÉŸä ÿßŸÑŸÖÿ™ÿÆÿµÿµ ŸÅŸä ÿ±ÿπÿßŸäÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿÆÿØÿ¨. üë∂<br><br>
                                        ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ŸÅŸä:<br>
                                        ‚Ä¢ ŸÅŸáŸÖ ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ∑ÿ®Ÿäÿ© ÿßŸÑÿ≠ŸäŸàŸäÿ©<br>
                                        ‚Ä¢ ÿ™ŸÇÿØŸäŸÖ ŸÜÿµÿßÿ¶ÿ≠ ÿ∑ÿ®Ÿäÿ© ŸÖÿ™ÿÆÿµÿµÿ©<br>
                                        ‚Ä¢ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿπŸÑŸâ ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ŸÉ ÿßŸÑÿ∑ÿ®Ÿäÿ©<br>
                                        ‚Ä¢ ÿ™ÿ≠ŸÑŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÅŸÑ ŸàÿßŸÑÿ™ŸàÿµŸäÿßÿ™<br><br>
                                        ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü
                                    </div>
                                    <div class="ai-message-time">ÿßŸÑÿ¢ŸÜ</div>
                                </div>
                            </div>
                        </div>

                        <div class="ai-typing" id="aiTyping">
                            <div class="ai-avatar" style="background: linear-gradient(135deg, var(--primary), var(--secondary));">ü§ñ</div>
                            <div class="ai-typing-dots">
                                <div class="ai-typing-dot"></div>
                                <div class="ai-typing-dot"></div>
                                <div class="ai-typing-dot"></div>
                            </div>
                        </div>

                        <div class="ai-chat-input-container">
                            <textarea 
                                class="ai-chat-input" 
                                id="aiChatInput" 
                                placeholder="ÿßŸÉÿ™ÿ® ÿ≥ÿ§ÿßŸÑŸÉ ÿßŸÑÿ∑ÿ®Ÿä ŸáŸÜÿß... (ŸÖÿ´ÿßŸÑ: ŸÖÿß ŸáŸä ÿ£ÿπÿ±ÿßÿ∂ ÿßŸÑÿ∂ÿßÿ¶ŸÇÿ© ÿßŸÑÿ™ŸÜŸÅÿ≥Ÿäÿ©ÿü)"
                                rows="1"
                                onkeydown="handleChatKeydown(event)"
                            ></textarea>
                            <button class="ai-send-btn" onclick="sendAIMessage()" id="aiSendBtn">
                                ‚û§
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© -->
        <div id="charts" class="tab-content">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© (ÿ¢ÿÆÿ± ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="tempChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ® (ÿ¢ÿÆÿ± ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="heartChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ (ÿ¢ÿÆÿ± ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="oxygenChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">
                        <span>üìà</span>
                        ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© (ÿ¢ÿÆÿ± ÿ≥ÿßÿπÿ©)
                    </div>
                    <div class="chart-container">
                        <canvas id="humidityChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ -->
        <div id="alerts" class="tab-content">
            <div class="grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">
                        <span>üîî</span>
                        ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™
                    </div>
                    <div class="alerts-list" id="alertsList">
                        <div class="alert-item alert-info">
                            <div class="alert-icon">‚ÑπÔ∏è</div>
                            <div class="alert-content">
                                <strong>ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ¨ÿßŸáÿ≤:</strong> ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßÿ™ÿµÿßŸÑ Arduino
                            </div>
                            <div class="alert-time">ÿßŸÑÿ¢ŸÜ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® Arduino ŸàŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ -->
        <div id="arduino" class="tab-content">
            <!-- ÿßÿ™ÿµÿßŸÑ Arduino -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>üì°</span>
                    ÿßÿ™ÿµÿßŸÑ Arduino WiFi
                </div>
                <div class="connection-panel">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ:</h3>
                        <span class="status-indicator status-disconnected" id="arduinoStatus">
                            <span class="status-dot-animated"></span>
                            ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ
                        </span>
                    </div>
                    
                    <div class="form-group">
                        <label>ÿπŸÜŸàÿßŸÜ IP ŸÑŸÄ Arduino:</label>
                        <input type="text" class="form-input" id="arduinoIP" placeholder="192.168.1.100" value="192.168.1.100">
                        <small style="opacity: 0.7; display: block; margin-top: 5px;">
                            üí° ÿ≥ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ Ÿáÿ∞ÿß ÿßŸÑÿπŸÜŸàÿßŸÜ ŸÖŸÜ Serial Monitor ÿ®ÿπÿØ ÿ±ŸÅÿπ ÿßŸÑŸÉŸàÿØ ÿπŸÑŸâ Arduino
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label>ÿßŸÑŸÖŸÜŸÅÿ∞ (Port):</label>
                        <input type="text" class="form-input" id="arduinoPort" placeholder="80" value="80">
                    </div>

                    <div class="form-group">
                        <label>ŸÖÿπÿØŸÑ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© (ŸÖŸäŸÑŸä ÿ´ÿßŸÜŸäÿ©):</label>
                        <input type="number" class="form-input" id="readInterval" placeholder="1000" value="1000" min="500" max="5000">
                        <small style="opacity: 0.7; display: block; margin-top: 5px;">
                            üí° 1000ms = ÿ´ÿßŸÜŸäÿ© Ÿàÿßÿ≠ÿØÿ© (ŸÖŸàÿµŸâ ÿ®Ÿá)
                        </small>
                    </div>
                    
                    <div class="control-buttons" style="grid-template-columns: 1fr 1fr;">
                        <button class="control-btn btn-success" onclick="connectArduino()" id="btnConnect">
                            <span>üîó</span>
                            ÿßÿ™ÿµÿßŸÑ
                        </button>
                        <button class="control-btn btn-danger" onclick="disconnectArduino()" disabled id="btnDisconnect">
                            <span>‚úñÔ∏è</span>
                            ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ
                        </button>
                    </div>
                    
                    <div class="last-sync" id="arduinoLastSync">
                        ÿ¢ÿÆÿ± ŸÖÿ≤ÿßŸÖŸÜÿ©: ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿπÿØ
                    </div>
                </div>

                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-top: 20px; border-right: 4px solid #2196f3;">
                    <h3 style="color: #1565c0; margin-bottom: 15px;">üìã ÿÆÿ∑Ÿàÿßÿ™ ÿßŸÑÿ•ÿπÿØÿßÿØ:</h3>
                    <ol style="color: #1565c0; line-height: 2; margin-right: 20px;">
                        <li>ŸÇŸÖ ÿ®ÿ±ŸÅÿπ ŸÉŸàÿØ Arduino ÿπŸÑŸâ ŸÑŸàÿ≠ÿ© Arduino Uno R3 WiFi</li>
                        <li>ÿßŸÅÿ™ÿ≠ Serial Monitor ŸàÿßŸÜÿ™ÿ∏ÿ± ÿ≠ÿ™Ÿâ Ÿäÿ™ÿµŸÑ Arduino ÿ®ÿ¥ÿ®ŸÉÿ© WiFi</li>
                        <li>ÿßŸÜÿ≥ÿÆ ÿπŸÜŸàÿßŸÜ IP ÿßŸÑÿ∞Ÿä Ÿäÿ∏Ÿáÿ± ŸÅŸä Serial Monitor</li>
                        <li>ÿßŸÑÿµŸÇ ÿπŸÜŸàÿßŸÜ IP ŸÅŸä ÿßŸÑÿ≠ŸÇŸÑ ÿ£ÿπŸÑÿßŸá Ÿàÿßÿ∂ÿ∫ÿ∑ "ÿßÿ™ÿµÿßŸÑ"</li>
                        <li>ÿ≥Ÿäÿ®ÿØÿ£ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ®ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸäÿ© ŸÖŸÜ Arduino</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- ÿ™ÿ®ŸàŸäÿ® ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ -->
        <div id="settings" class="tab-content">
            <div class="grid">
                <!-- ÿßŸÑÿ´ŸäŸÖÿßÿ™ -->
                <div class="card">
                    <div class="card-title">
                        <span>üé®</span>
                        ÿßŸÑÿ´ŸäŸÖÿßÿ™ (ÿßŸÑŸÖÿ∏Ÿáÿ±)
                    </div>
                    <div class="input-group">
                        <label class="input-label">ÿßÿÆÿ™ÿ± ÿßŸÑÿ´ŸäŸÖ:</label>
                        <select class="form-select" id="themeSelect" onchange="applyTheme()">
                            <option value="light">‚òÄÔ∏è ŸÅÿßÿ™ÿ≠ (Light)</option>
                            <option value="dark">üåô ÿØÿßŸÉŸÜ (Dark)</option>
                            <option value="blue">üíô ÿ£ÿ≤ÿ±ŸÇ (Blue)</option>
                            <option value="green">üíö ÿ£ÿÆÿ∂ÿ± (Green)</option>
                            <option value="purple">üíú ÿ®ŸÜŸÅÿ≥ÿ¨Ÿä (Purple)</option>
                            <option value="orange">üß° ÿ®ÿ±ÿ™ŸÇÿßŸÑŸä (Orange)</option>
                        </select>
                    </div>

                    <div class="theme-preview" id="themePreview">
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 3em; margin-bottom: 10px;">üé®</div>
                            <div>ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ´ŸäŸÖ ÿßŸÑŸÖÿÆÿ™ÿßÿ±</div>
                        </div>
                    </div>
                </div>

                <!-- ÿ≠ÿØŸàÿØ ÿßŸÑÿ™ŸÜÿ®ŸäŸá -->
                <div class="card">
                    <div class="card-title">
                        <span>‚öôÔ∏è</span>
                        ÿ≠ÿØŸàÿØ ÿßŸÑÿ™ŸÜÿ®ŸäŸá
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ≠ÿØ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ£ÿØŸÜŸâ</span>
                            <span class="slider-value" id="tempMinValue">36.0¬∞C</span>
                        </div>
                        <input type="range" class="slider" min="35" max="37" step="0.5" value="36" 
                               id="tempMin" oninput="updateTempMin(this.value)">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>ÿ≠ÿØ ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ£ÿπŸÑŸâ</span>
                            <span class="slider-value" id="tempMaxValue">37.5¬∞C</span>
                        </div>
                        <input type="range" class="slider" min="37" max="39" step="0.5" value="37.5" 
                               id="tempMax" oninput="updateTempMax(this.value)">
                    </div>
                </div>

                <!-- ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ -->
                <div class="card">
                    <div class="card-title">
                        <span>üíæ</span>
                        ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                    </div>
                    <div class="control-buttons" style="grid-template-columns: 1fr;">
                        <button class="control-btn btn-primary" onclick="exportData()">
                            <span>üì•</span>
                            ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                        </button>
                        <button class="control-btn btn-success" onclick="saveSettings()">
                            <span>üíæ</span>
                            ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™
                        </button>
                    </div>
                </div>
            </div>
        </div>

    <!-- ÿ≤ÿ± ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ -->
    <button class="emergency-btn" onclick="emergencyAlert()" id="emergencyButton" disabled>
        <span class="emergency-icon">üö®</span>
        <span style="font-size: 0.8em;">ÿ∑Ÿàÿßÿ±ÿ¶</span>
    </button>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ
        let charts = {};
        let isConnected = false;
        let arduinoDataInterval = null;
        let chartDataHistory = {
            temperature: [],
            heartRate: [],
            oxygen: [],
            humidity: [],
            timestamps: []
        };
        let lastDataTime = null;
        let isRotatingControl = false;
        let currentZoom = 1;

        // ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
        let aiModel = {
            healthScore: 0,
            riskLevel: '--',
            predictions: [],
            recommendations: [],
            criticalRisks: {
                sepsis: 0,
                nec: 0,
                rds: 0
            }
        };

        // ============================================
        // üì° ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino
        // ============================================

        async function connectArduino() {
            const ip = document.getElementById('arduinoIP').value;
            const port = document.getElementById('arduinoPort').value;
            
            if (!ip) {
                addAlert('‚ö†Ô∏è ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿπŸÜŸàÿßŸÜ IP ŸÑŸÄ Arduino', 'warning');
                return;
            }

            document.getElementById('btnConnect').disabled = true;
            document.getElementById('btnConnect').innerHTML = '<span>‚è≥</span> ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ...';
            
            try {
                const response = await fetch(`http://${ip}:${port}/api/status`, {
                    method: 'GET',
                    signal: AbortSignal.timeout(10000)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                console.log('‚úÖ Arduino ŸÖÿ™ÿµŸÑ:', data);
                
                isConnected = true;
                
                // ÿ™ÿ≠ÿØŸäÿ´ Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ
                document.getElementById('arduinoStatus').innerHTML = '<span class="status-dot-animated"></span> ŸÖÿ™ÿµŸÑ';
                document.getElementById('arduinoStatus').className = 'status-indicator status-connected';
                document.getElementById('connectionBadge').textContent = '‚óè ŸÖÿ™ÿµŸÑ';
                document.getElementById('connectionBadge').className = 'badge badge-online';
                document.getElementById('statusBadge').textContent = '‚úì Ÿäÿ≥ÿ™ŸÇÿ®ŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™';
                document.getElementById('statusBadge').style.background = '#10b981';
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
                const mainStatus = document.getElementById('mainConnectionStatus');
                mainStatus.className = 'connection-status connected';
                mainStatus.innerHTML = `
                    <div style="font-size: 3em; margin-bottom: 10px;">‚úÖ</div>
                    <h2 style="margin-bottom: 10px; color: var(--success);">ŸÖÿ™ÿµŸÑ ÿ®ŸÄ Arduino ÿ®ŸÜÿ¨ÿßÿ≠</h2>
                    <p style="opacity: 0.8;">
                        Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸäÿ© ŸÖŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿ¥ÿπÿ±ÿßÿ™.<br>
                        IP: ${ip}:${port}
                    </p>
                `;
                
                // ÿ™ŸÅÿπŸäŸÑ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ
                enableControlButtons();
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸäÿ©
                updateFromArduino(data);
                
                // ÿ®ÿØÿ° ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿØŸàÿ±Ÿäÿ©
                startArduinoPolling(ip, port);
                
                addAlert('ÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino ÿ®ŸÜÿ¨ÿßÿ≠ - ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸäÿ© ÿ™Ÿèÿ≥ÿ™ŸÇÿ®ŸÑ ÿßŸÑÿ¢ŸÜ', 'success');
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ
                document.getElementById('btnConnect').disabled = true;
                document.getElementById('btnConnect').innerHTML = '<span>‚úì</span> ŸÖÿ™ÿµŸÑ';
                document.getElementById('btnDisconnect').disabled = false;
                
            } catch (error) {
                console.error('‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino:', error);
                
                isConnected = false;
                
                document.getElementById('arduinoStatus').innerHTML = '<span class="status-dot-animated"></span> ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ';
                document.getElementById('arduinoStatus').className = 'status-indicator status-disconnected';
                document.getElementById('connectionBadge').textContent = '‚óè ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ';
                document.getElementById('connectionBadge').className = 'badge badge-critical';
                
                addAlert(`ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino: ${error.message}`, 'danger');
                
                document.getElementById('btnConnect').disabled = false;
                document.getElementById('btnConnect').innerHTML = '<span>üîó</span> ÿßÿ™ÿµÿßŸÑ';
                
                // ŸÑÿß ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿ™ŸÜÿ®ŸäŸá ŸÖŸÜÿ®ÿ´ŸÇ (alert) ÿ≠ÿ™Ÿâ ŸÑÿß ŸäŸàŸÇŸÅ Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ.
                addAlert(`‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino: ${error.message}.\nÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ Arduino ÿ®ÿßŸÑÿ¥ÿ®ŸÉÿ©ÿå Ÿàÿµÿ≠ÿ© ÿπŸÜŸàÿßŸÜ IPÿå Ÿàÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ¨Ÿáÿßÿ≤ÿå Ÿàÿ∫Ÿäÿßÿ® ÿ¨ÿØÿßÿ± ŸÜÿßÿ±Ÿä.`, 'danger');
            }
        }

        function disconnectArduino() {
            stopArduinoConnection();
            isConnected = false;
            
            document.getElementById('arduinoStatus').innerHTML = '<span class="status-dot-animated"></span> ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ';
            document.getElementById('arduinoStatus').className = 'status-indicator status-disconnected';
            document.getElementById('connectionBadge').textContent = '‚óè ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ';
            document.getElementById('connectionBadge').className = 'badge badge-offline';
            document.getElementById('statusBadge').textContent = '‚è∏ ŸÖŸÜŸÇÿ∑ÿπ';
            document.getElementById('statusBadge').style.background = '#6b7280';
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
            const mainStatus = document.getElementById('mainConnectionStatus');
            mainStatus.className = 'connection-status disconnected';
            mainStatus.innerHTML = `
                <div style="font-size: 3em; margin-bottom: 10px;">üì°</div>
                <h2 style="margin-bottom: 10px; color: var(--danger);">ÿ™ŸÖ ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ</h2>
                <p style="opacity: 0.8; margin-bottom: 20px;">
                    ÿ™ŸÖ ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino.<br>
                    ÿßÿ∂ÿ∫ÿ∑ "ÿßÿ™ÿµÿßŸÑ" ŸÑÿ•ÿπÿßÿØÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ.
                </p>
                <button class="control-btn btn-primary" onclick="connectArduino()" style="max-width: 300px; margin: 0 auto;">
                    <span>üîó</span>
                    ÿ•ÿπÿßÿØÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ
                </button>
            `;
            
            // ÿ™ÿπÿ∑ŸäŸÑ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ
            disableControlButtons();
            
            // ŸÖÿ≥ÿ≠ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            clearSensorDisplays();
            
            addAlert('ÿ™ŸÖ ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino', 'warning');
            
            document.getElementById('btnConnect').disabled = false;
            document.getElementById('btnConnect').innerHTML = '<span>üîó</span> ÿßÿ™ÿµÿßŸÑ';
            document.getElementById('btnDisconnect').disabled = true;
        }

        function startArduinoPolling(ip, port) {
            stopArduinoConnection();
            
            const interval = parseInt(document.getElementById('readInterval')?.value || 1000);
            
            arduinoDataInterval = setInterval(async () => {
                try {
                    const response = await fetch(`http://${ip}:${port}/api/status`, {
                        signal: AbortSignal.timeout(3000)
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        updateFromArduino(data);
                        
                        document.getElementById('arduinoLastSync').textContent = 
                            'ÿ¢ÿÆÿ± ŸÖÿ≤ÿßŸÖŸÜÿ©: ' + new Date().toLocaleTimeString('ar');
                    } else {
                        throw new Error('ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™');
                    }
                } catch (error) {
                    console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÇÿ±ÿßÿ°ÿ©:', error);
                    addAlert(`ÿÆÿ∑ÿ£ ŸÅŸä ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™: ${error.message}`, 'warning');
                }
            }, interval);
        }

        function stopArduinoConnection() {
            if (arduinoDataInterval) {
                clearInterval(arduinoDataInterval);
                arduinoDataInterval = null;
            }
        }

        function updateFromArduino(data) {
            console.log('üìä ÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Arduino:', data);
            lastDataTime = Date.now();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ©
            if (data.temperature !== undefined) {
                updateSensorValue('bodyTemp', data.temperature.toFixed(1), checkTemp(data.temperature));
                updateSensorValue('envTemp', data.temperature.toFixed(1), checkTemp(data.temperature));
                updateSensorValue('visualTemp', data.temperature.toFixed(1) + '¬∞C');
                addToChart('temperature', data.temperature);
            }
            
            if (data.humidity !== undefined) {
                updateSensorValue('humidity', Math.round(data.humidity), checkHumidity(data.humidity));
                updateSensorValue('visualHumidity', Math.round(data.humidity) + '%');
                addToChart('humidity', data.humidity);
            }
            
            if (data.heartRate !== undefined && data.heartRate > 0) {
                updateSensorValue('heartRate', Math.round(data.heartRate), checkHeartRate(data.heartRate));
                updateSensorValue('visualHeart', Math.round(data.heartRate) + ' bpm');
                addToChart('heartRate', data.heartRate);
            }
            
            if (data.oxygenLevel !== undefined) {
                updateSensorValue('oxygenLevel', Math.round(data.oxygenLevel), checkOxygen(data.oxygenLevel));
                updateSensorValue('visualOxygen', Math.round(data.oxygenLevel) + '%');
                addToChart('oxygen', data.oxygenLevel);
            }
            
            if (data.respRate !== undefined) {
                updateSensorValue('respRate', Math.round(data.respRate), checkRespiration(data.respRate));
            }
            
            if (data.weight !== undefined) {
                updateSensorValue('weight', data.weight.toFixed(1), 'ok');
                updateSensorValue('currentWeight', data.weight.toFixed(1) + ' ŸÉÿ¨ŸÖ');
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿπŸÖÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            updateDataAge();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÑŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
            if (Math.random() > 0.7) {
                calculateHealthScore();
            }
        }

        function updateSensorValue(id, value, status) {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = value;
            }
            
            if (status) {
                const statusElement = document.getElementById(id + 'Status');
                if (statusElement) {
                    if (status === 'ok') {
                        statusElement.textContent = 'ÿ∑ÿ®ŸäÿπŸä';
                        statusElement.className = 'sensor-status status-ok';
                    } else {
                        statusElement.textContent = status;
                        statusElement.className = 'sensor-status status-alert';
                    }
                }
            }
        }

        function clearSensorDisplays() {
            const sensors = ['bodyTemp', 'heartRate', 'oxygenLevel', 'respRate', 'humidity', 'weight', 'envTemp'];
            sensors.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = '--';
                
                const statusElement = document.getElementById(id + 'Status');
                if (statusElement) {
                    statusElement.textContent = 'ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ';
                    statusElement.className = 'sensor-status';
                }
            });
            
            document.getElementById('visualTemp').textContent = '-- ¬∞C';
            document.getElementById('visualHumidity').textContent = '-- %';
            document.getElementById('visualHeart').textContent = '-- bpm';
            document.getElementById('visualOxygen').textContent = '-- %';
            document.getElementById('currentWeight').textContent = '-- ŸÉÿ¨ŸÖ';
            document.getElementById('dataAge').textContent = '--';
        }

        function updateDataAge() {
            if (!lastDataTime) return;
            
            setInterval(() => {
                if (!lastDataTime) return;
                const age = Math.floor((Date.now() - lastDataTime) / 1000);
                document.getElementById('dataAge').textContent = age;
                
                if (age > 10) {
                    addAlert('ÿ™ÿ≠ÿ∞Ÿäÿ±: ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿ¨ÿØŸäÿØÿ© ŸÖŸÜÿ∞ ' + age + ' ÿ´ÿßŸÜŸäÿ©', 'warning');
                }
            }, 1000);
        }

        // ============================================
        // üè• ŸÅÿ≠ÿµ ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿ©
        // ============================================

        function checkTemp(temp) {
            if (temp < 36.0) return 'ŸÖŸÜÿÆŸÅÿ∂ ÿ¨ÿØÿßŸã';
            if (temp < 36.3) return 'ŸÖŸÜÿÆŸÅÿ∂ ŸÇŸÑŸäŸÑÿßŸã';
            if (temp > 37.5) return 'ŸÖÿ±ÿ™ŸÅÿπ ÿ¨ÿØÿßŸã';
            if (temp > 37.2) return 'ŸÖÿ±ÿ™ŸÅÿπ ŸÇŸÑŸäŸÑÿßŸã';
            return 'ok';
        }

        function checkHeartRate(hr) {
            if (hr < 100) return 'ŸÖŸÜÿÆŸÅÿ∂ ÿ¨ÿØÿßŸã';
            if (hr < 120) return 'ŸÖŸÜÿÆŸÅÿ∂ ŸÇŸÑŸäŸÑÿßŸã';
            if (hr > 180) return 'ŸÖÿ±ÿ™ŸÅÿπ ÿ¨ÿØÿßŸã';
            if (hr > 160) return 'ŸÖÿ±ÿ™ŸÅÿπ ŸÇŸÑŸäŸÑÿßŸã';
            return 'ok';
        }

        function checkOxygen(o2) {
            if (o2 < 90) return 'ŸÖŸÜÿÆŸÅÿ∂ ÿÆÿ∑Ÿäÿ±';
            if (o2 < 94) return 'ŸÖŸÜÿÆŸÅÿ∂';
            return 'ok';
        }

        function checkHumidity(h) {
            if (h < 40) return 'ŸÖŸÜÿÆŸÅÿ∂';
            if (h > 70) return 'ŸÖÿ±ÿ™ŸÅÿπ';
            return 'ok';
        }

        function checkRespiration(rr) {
            if (rr < 30) return 'ŸÖŸÜÿÆŸÅÿ∂';
            if (rr > 60) return 'ŸÖÿ±ÿ™ŸÅÿπ';
            return 'ok';
        }

        // ============================================
        // üìä ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ©
        // ============================================

        function initCharts() {
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { 
                    y: { beginAtZero: false },
                    x: { display: true }
                },
                animation: { duration: 0 }
            };
            
            const tempCtx = document.getElementById('tempChart');
            if (tempCtx) {
                charts.temp = new Chart(tempCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©',
                            data: [],
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
            
            const heartCtx = document.getElementById('heartChart');
            if (heartCtx) {
                charts.heart = new Chart(heartCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ®',
                            data: [],
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
            
            const oxygenCtx = document.getElementById('oxygenChart');
            if (oxygenCtx) {
                charts.oxygen = new Chart(oxygenCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ',
                            data: [],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
            
            const humidityCtx = document.getElementById('humidityChart');
            if (humidityCtx) {
                charts.humidity = new Chart(humidityCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ©',
                            data: [],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }
        }

        function addToChart(type, value) {
            const now = new Date().toLocaleTimeString('ar', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            
            if (!chartDataHistory[type]) chartDataHistory[type] = [];
            if (!chartDataHistory.timestamps) chartDataHistory.timestamps = [];
            
            chartDataHistory[type].push(value);
            chartDataHistory.timestamps.push(now);
            
            // ÿ≠ŸÅÿ∏ ÿ¢ÿÆÿ± 60 ŸÇÿ±ÿßÿ°ÿ© ŸÅŸÇÿ∑ (ÿ≥ÿßÿπÿ© Ÿàÿßÿ≠ÿØÿ© ÿπŸÜÿØ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ŸÉŸÑ ÿØŸÇŸäŸÇÿ©)
            if (chartDataHistory[type].length > 60) {
                chartDataHistory[type].shift();
                chartDataHistory.timestamps.shift();
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸä
            let chart = null;
            if (type === 'temperature') chart = charts.temp;
            else if (type === 'heartRate') chart = charts.heart;
            else if (type === 'oxygen') chart = charts.oxygen;
            else if (type === 'humidity') chart = charts.humidity;
            
            if (chart) {
                chart.data.labels = chartDataHistory.timestamps;
                chart.data.datasets[0].data = chartDataHistory[type];
                chart.update();
            }
        }

        // ============================================
        // üí° ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ•ÿ∂ÿßÿ°ÿßÿ™ ÿßŸÑÿ´ŸÑÿßÿ´ÿ©
        // ============================================

        function toggleNormalLight(enabled) {
            const lightElement = document.getElementById('lightNormalControl');
            const indicator = document.getElementById('normalLightIndicator');
            
            if (enabled) {
                lightElement.classList.add('active');
                indicator.classList.add('active-system');
                const intensity = document.getElementById('normalLightIntensity').value;
                lightElement.style.opacity = intensity / 100;
                addAlert('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©', 'info');
                
                if (isConnected) {
                    sendCommandToArduino('/api/light', { mode: 1, intensity: parseInt(intensity) });
                }
            } else {
                lightElement.classList.remove('active');
                indicator.classList.remove('active-system');
                addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ©', 'info');
                
                if (isConnected) {
                    sendCommandToArduino('/api/light', { mode: 0 });
                }
            }
        }

        function updateNormalLightIntensity(value) {
            document.getElementById('normalLightValue').textContent = value + '%';
            const lightElement = document.getElementById('lightNormalControl');
            const isActive = document.getElementById('normalLightSwitch').checked;
            
            if (isActive) {
                lightElement.style.opacity = value / 100;
                
                if (isConnected) {
                    sendCommandToArduino('/api/light', { mode: 1, intensity: parseInt(value) });
                }
            }
        }

        function toggleJaundiceLight(enabled) {
            const lightElement = document.getElementById('lightJaundiceControl');
            const indicator = document.getElementById('jaundiceLightIndicator');
            
            if (enabled) {
                if (!confirm('‚ö†Ô∏è ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä ŸÑŸÑŸäÿ±ŸÇÿßŸÜÿü\n\nÿßŸÑÿ∑ŸàŸÑ ÿßŸÑŸÖŸàÿ¨Ÿä: 450-470nm\nÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ: ÿπŸÑÿßÿ¨ ÿßŸÑŸäÿ±ŸÇÿßŸÜ ÿßŸÑŸàŸÑŸäÿØŸä')) {
                    document.getElementById('jaundiceSwitch').checked = false;
                    return;
                }
                
                lightElement.classList.add('active');
                indicator.classList.add('active-system');
                const intensity = document.getElementById('jaundiceLightIntensity').value;
                lightElement.style.opacity = intensity / 100;
                addAlert('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä - 450-470nm', 'warning');
                
                if (isConnected) {
                    sendCommandToArduino('/api/light', { mode: 2, intensity: parseInt(intensity) });
                }
                
                if (document.getElementById('uvSwitch').checked) {
                    document.getElementById('uvSwitch').checked = false;
                    toggleUVSterilization(false);
                }
            } else {
                lightElement.classList.remove('active');
                indicator.classList.remove('active-system');
                addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿπŸÑÿßÿ¨ ÿßŸÑÿ∂Ÿàÿ¶Ÿä', 'info');
                
                if (isConnected) {
                    sendCommandToArduino('/api/light', { mode: 0 });
                }
            }
        }

        function updateJaundiceLightIntensity(value) {
            document.getElementById('jaundiceLightValue').textContent = value + '%';
            const lightElement = document.getElementById('lightJaundiceControl');
            const isActive = document.getElementById('jaundiceSwitch').checked;
            
            if (isActive) {
                lightElement.style.opacity = value / 100;
                
                if (isConnected) {
                    sendCommandToArduino('/api/light', { mode: 2, intensity: parseInt(value) });
                }
            }
        }

        function toggleUVSterilization(enabled) {
            const lightElement = document.getElementById('lightUVControl');
            const indicator = document.getElementById('uvLightIndicator');
            
            if (enabled) {
                if (!confirm('‚ö†Ô∏è ÿ™ÿ≠ÿ∞Ÿäÿ± ÿ£ŸÖÿßŸÜ ÿ≠ÿ±ÿ¨!\n\nŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ®ÿØÿ° ÿßŸÑÿ™ÿπŸÇŸäŸÖ UV-Cÿü\n\n‚úã Ÿäÿ¨ÿ® ÿ•ÿÆŸÑÿßÿ° ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ© ÿ™ŸÖÿßŸÖÿßŸã!\nüö´ ÿßŸÑÿ£ÿ¥ÿπÿ© UV-C (254nm) ÿÆÿ∑ÿ±ÿ© ÿ¨ÿØÿßŸã!')) {
                    document.getElementById('uvSwitch').checked = false;
                    return;
                }
                
                lightElement.classList.add('active');
                indicator.classList.add('active-system');
                lightElement.style.opacity = 1;
                addAlert('ÿ®ÿØÿ° ÿßŸÑÿ™ÿπŸÇŸäŸÖ UV-C - 254nm', 'danger');
                
                if (isConnected) {
                    const duration = parseInt(document.getElementById('uvDuration').value);
                    sendCommandToArduino('/api/light', { mode: 3, intensity: 100, duration: duration });
                }
                
                if (document.getElementById('normalLightSwitch').checked) {
                    document.getElementById('normalLightSwitch').checked = false;
                    toggleNormalLight(false);
                }
                if (document.getElementById('jaundiceSwitch').checked) {
                    document.getElementById('jaundiceSwitch').checked = false;
                    toggleJaundiceLight(false);
                }
            } else {
                lightElement.classList.remove('active');
                indicator.classList.remove('active-system');
                addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ™ÿπŸÇŸäŸÖ UV-C', 'info');
                
                if (isConnected) {
                    sendCommandToArduino('/api/light', { mode: 0 });
                }
            }
        }

        function updateUVDuration(value) {
            document.getElementById('uvDurationValue').textContent = value + ' ÿØ';
        }

        // ============================================
        // üé¨ ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿπÿ±ÿ∂ ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ
        // ============================================

        function toggleRotationControl() {
            const incubator = document.getElementById('incubator3dControl');
            isRotatingControl = !isRotatingControl;
            
            if (isRotatingControl) {
                incubator.classList.add('rotating');
                document.getElementById('rotationIconControl').textContent = '‚è∏Ô∏è';
                document.getElementById('rotationTextControl').textContent = 'ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿØŸàÿ±ÿßŸÜ';
            } else {
                incubator.classList.remove('rotating');
                document.getElementById('rotationIconControl').textContent = '‚ñ∂Ô∏è';
                document.getElementById('rotationTextControl').textContent = 'ÿØŸàÿ±ÿßŸÜ ÿ™ŸÑŸÇÿßÿ¶Ÿä';
            }
        }

        function resetViewControl() {
            const incubator = document.getElementById('incubator3dControl');
            incubator.classList.remove('rotating');
            incubator.style.transform = 'translate(-50%, -50%) rotateX(20deg) rotateY(0deg) scale(1)';
            isRotatingControl = false;
            currentZoom = 1;
            document.getElementById('rotationIconControl').textContent = '‚ñ∂Ô∏è';
            document.getElementById('rotationTextControl').textContent = 'ÿØŸàÿ±ÿßŸÜ ÿ™ŸÑŸÇÿßÿ¶Ÿä';
        }

        // ============================================
        // ü§ñ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä
        // ============================================

        function runAIAnalysis() {
            if (!isConnected) {
                addAlert('‚ö†Ô∏è Ÿäÿ¨ÿ® ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ Arduino ÿ£ŸàŸÑÿßŸã', 'warning');
                return;
            }
            
            addAlert('ÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä...', 'info');
            
            setTimeout(() => {
                calculateHealthScore();
                predictRisks();
                generateRecommendations();
                
                addAlert('ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¥ÿßŸÖŸÑ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            }, 2000);
        }

        function calculateHealthScore() {
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 0);
            const heart = parseInt(document.getElementById('heartRate')?.textContent || 0);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 0);
            
            if (temp === 0 || heart === 0 || oxygen === 0) {
                document.getElementById('aiHealthScore').textContent = '--';
                document.getElementById('aiRiskLevel').textContent = '--';
                return;
            }
            
            let score = 100;
            
            if (temp < 36.0 || temp > 37.5) score -= 15;
            else if (temp < 36.3 || temp > 37.2) score -= 5;
            
            if (heart < 100 || heart > 180) score -= 15;
            else if (heart < 120 || heart > 160) score -= 5;
            
            if (oxygen < 90) score -= 20;
            else if (oxygen < 94) score -= 10;
            
            aiModel.healthScore = Math.max(0, Math.min(100, score));
            document.getElementById('aiHealthScore').textContent = aiModel.healthScore;
            
            if (aiModel.healthScore >= 90) {
                aiModel.riskLevel = 'ŸÖŸÜÿÆŸÅÿ∂';
                document.getElementById('aiRiskLevel').style.color = '#10b981';
            } else if (aiModel.healthScore >= 70) {
                aiModel.riskLevel = 'ŸÖÿ™Ÿàÿ≥ÿ∑';
                document.getElementById('aiRiskLevel').style.color = '#f59e0b';
            } else {
                aiModel.riskLevel = 'ŸÖÿ±ÿ™ŸÅÿπ';
                document.getElementById('aiRiskLevel').style.color = '#ef4444';
            }
            
            document.getElementById('aiRiskLevel').textContent = aiModel.riskLevel;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿÆÿßÿ∑ÿ± ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©
            updateCriticalRisks();
        }

        function updateCriticalRisks() {
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
            const heart = parseInt(document.getElementById('heartRate')?.textContent || 140);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
            
            let sepsisRisk = 5;
            if (temp > 38 || temp < 36) sepsisRisk += 15;
            if (heart > 160) sepsisRisk += 10;
            sepsisRisk = Math.min(95, sepsisRisk);
            
            let necRisk = 8;
            
            let rdsRisk = 12;
            if (oxygen < 92) rdsRisk += 20;
            rdsRisk = Math.min(95, rdsRisk);
            
            updateCriticalRisk('sepsis', sepsisRisk);
            updateCriticalRisk('nec', necRisk);
            updateCriticalRisk('rds', rdsRisk);
        }

        function updateCriticalRisk(type, value) {
            aiModel.criticalRisks[type] = value;
            
            const riskBar = document.getElementById(`${type}Risk`);
            const riskPercent = document.getElementById(`${type}Percent`);
            
            if (riskBar && riskPercent) {
                riskBar.style.width = value + '%';
                riskPercent.textContent = value + '%';
                
                if (value < 20) {
                    riskPercent.style.color = 'var(--success)';
                } else if (value < 50) {
                    riskPercent.style.color = 'var(--warning)';
                } else {
                    riskPercent.style.color = 'var(--danger)';
                }
            }
        }

        function predictRisks() {
            aiModel.predictions = [];
            
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
            
            if (temp < 36.5) {
                aiModel.predictions.push({
                    type: 'high',
                    icon: 'üå°Ô∏è',
                    title: 'ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿßŸÜÿÆŸÅÿßÿ∂ ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ¨ÿ≥ŸÖ',
                    description: 'ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿ£ŸÇŸÑ ŸÖŸÜ ÿßŸÑŸÖÿπÿØŸÑ ÿßŸÑÿ∑ÿ®ŸäÿπŸä',
                    probability: 75
                });
            }
            
            if (oxygen < 95) {
                aiModel.predictions.push({
                    type: 'high',
                    icon: 'ü´Å',
                    title: 'ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ŸÜŸÇÿµ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ÿ©',
                    description: 'ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ ŸÖŸÜÿÆŸÅÿ∂',
                    probability: 70
                });
            }
            
            if (aiModel.predictions.length === 0) {
                aiModel.predictions.push({
                    type: 'low',
                    icon: '‚úÖ',
                    title: 'ÿ≠ÿßŸÑÿ© ŸÖÿ≥ÿ™ŸÇÿ±ÿ© ŸàŸÖŸÖÿ™ÿßÿ≤ÿ©',
                    description: 'ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿ∂ŸÖŸÜ ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿ∑ÿ®ŸäÿπŸä',
                    probability: 95
                });
            }
            
            displayRiskPredictions();
        }

        function displayRiskPredictions() {
            const container = document.getElementById('aiRiskPredictions');
            
            if (aiModel.predictions.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.6; padding: 20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿÆÿßÿ∑ÿ±</p>';
                return;
            }
            
            container.innerHTML = aiModel.predictions.map(pred => `
                <div class="risk-item risk-${pred.type}">
                    <div class="risk-icon">${pred.icon}</div>
                    <div class="risk-content">
                        <div class="risk-title">${pred.title}</div>
                        <div class="risk-description">${pred.description}</div>
                    </div>
                    <div class="risk-probability">${pred.probability}%</div>
                </div>
            `).join('');
        }

        function generateRecommendations() {
            aiModel.recommendations = [];
            
            const temp = parseFloat(document.getElementById('bodyTemp')?.textContent || 36.5);
            const oxygen = parseInt(document.getElementById('oxygenLevel')?.textContent || 96);
            
            if (temp < 36.3) {
                aiModel.recommendations.push({
                    icon: 'üî•',
                    title: 'ÿ≤ŸäÿßÿØÿ© ÿ≠ÿ±ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ©',
                    text: 'ŸäŸèŸÜÿµÿ≠ ÿ®ÿ±ŸÅÿπ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ© ÿ®ŸÖŸÇÿØÿßÿ± 0.5¬∞C',
                    priority: 'high'
                });
            }
            
            if (oxygen < 95) {
                aiModel.recommendations.push({
                    icon: 'ü´Å',
                    title: 'ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ÿ©',
                    text: 'ÿ≤ŸäÿßÿØÿ© ÿ™ÿ±ŸÉŸäÿ≤ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ ÿ®ŸÜÿ≥ÿ®ÿ© 2-3%',
                    priority: 'high'
                });
            }
            
            aiModel.recommendations.push({
                icon: '‚úÖ',
                title: 'ÿßŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ± ŸÅŸä ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ©',
                text: 'ÿßŸÑÿ≠ÿßŸÑÿ© ŸÖÿ≥ÿ™ŸÇÿ±ÿ© - ŸÖÿ™ÿßÿ®ÿπÿ© ÿ±Ÿàÿ™ŸäŸÜŸäÿ©',
                priority: 'low'
            });
            
            displayRecommendations();
        }

        function displayRecommendations() {
            const container = document.getElementById('aiRecommendations');
            
            container.innerHTML = aiModel.recommendations.map(rec => `
                <div class="recommendation-item">
                    <div class="recommendation-icon">${rec.icon}</div>
                    <div class="recommendation-content">
                        <div class="recommendation-title">${rec.title}</div>
                        <div class="recommendation-text">${rec.text}</div>
                        <span class="recommendation-priority priority-${rec.priority}">
                            ${rec.priority === 'high' ? 'ÿ£ŸàŸÑŸàŸäÿ© ÿπÿßŸÑŸäÿ©' : rec.priority === 'medium' ? 'ÿ£ŸàŸÑŸàŸäÿ© ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©' : 'ÿ£ŸàŸÑŸàŸäÿ© ŸÖŸÜÿÆŸÅÿ∂ÿ©'}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        // ============================================
        // üé® ÿßŸÑÿ´ŸäŸÖÿßÿ™
        // ============================================

        const themes = {
            light: { '--primary': '#667eea', '--secondary': '#764ba2', '--bg': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' },
            dark: { '--primary': '#667eea', '--secondary': '#764ba2', '--bg': '#111827' },
            blue: { '--primary': '#3b82f6', '--secondary': '#1e40af', '--bg': 'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)' },
            green: { '--primary': '#10b981', '--secondary': '#047857', '--bg': 'linear-gradient(135deg, #10b981 0%, #047857 100%)' },
            purple: { '--primary': '#a855f7', '--secondary': '#7c3aed', '--bg': 'linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)' },
            orange: { '--primary': '#f59e0b', '--secondary': '#d97706', '--bg': 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' }
        };

        function applyTheme() {
            const theme = document.getElementById('themeSelect').value;
            const root = document.documentElement;
            document.body.setAttribute('data-theme', theme === 'dark' ? 'dark' : 'light');
            const colors = themes[theme];
            for (const [key, value] of Object.entries(colors)) {
                root.style.setProperty(key, value);
            }
            localStorage.setItem('selectedTheme', theme);
        }

        function updateTempMin(value) {
            document.getElementById('tempMinValue').textContent = value + '¬∞C';
        }

        function updateTempMax(value) {
            document.getElementById('tempMaxValue').textContent = value + '¬∞C';
        }

        function exportData() {
            const data = {
                timestamp: new Date(),
                temperature: document.getElementById('bodyTemp').textContent,
                heartRate: document.getElementById('heartRate').textContent,
                oxygen: document.getElementById('oxygenLevel').textContent
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `incubator_data_${Date.now()}.json`;
            link.click();
            addAlert('ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™', 'success');
        }

        function saveSettings() {
            addAlert('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™', 'success');
        }

        // ============================================
        // üéõÔ∏è ÿ™ÿ≠ÿØŸäÿ´ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ
        // ============================================

        function enableControlButtons() {
            document.querySelectorAll('#control input, #control button').forEach(el => {
                el.disabled = false;
            });
            document.getElementById('emergencyButton').disabled = false;
            document.getElementById('btnAIAnalysis').disabled = false;
            
            // ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ© ÿßŸÑÿπÿßÿØŸäÿ© ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäÿßŸã
            if (document.getElementById('normalLightSwitch').checked) {
                toggleNormalLight(true);
            }
        }

        function disableControlButtons() {
            document.querySelectorAll('#control input, #control button').forEach(el => {
                el.disabled = true;
            });
            document.getElementById('emergencyButton').disabled = true;
        }

        async function sendCommandToArduino(endpoint, data) {
            if (!isConnected) {
                addAlert('‚ö†Ô∏è ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ŸÄ Arduino', 'warning');
                return;
            }
            
            const ip = document.getElementById('arduinoIP').value;
            const port = document.getElementById('arduinoPort').value;
            
            try {
                const response = await fetch(`http://${ip}:${port}${endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    console.log('‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖÿ±:', endpoint, data);
                    addAlert('ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖÿ± ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                } else {
                    throw new Error('ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖÿ±');
                }
            } catch (error) {
                console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖÿ±:', error);
                addAlert('ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖÿ± ÿ•ŸÑŸâ Arduino', 'danger');
            }
        }

        function updateHeatingTemp(value) {
            document.getElementById('heatingTempValue').textContent = value + '¬∞C';
            if (isConnected) {
                sendCommandToArduino('/api/heating', { 
                    temperature: parseFloat(value),
                    enabled: document.getElementById('heatingSwitch').checked 
                });
            }
        }

        function updateHumidityTarget(value) {
            document.getElementById('humidityTargetValue').textContent = value + '%';
            if (isConnected) {
                sendCommandToArduino('/api/humidity', { 
                    target: parseInt(value),
                    enabled: document.getElementById('humidifierSwitch').checked 
                });
            }
        }

        function updateOxygenLevel(value) {
            document.getElementById('oxygenLevelValue').textContent = value + '%';
            if (isConnected) {
                sendCommandToArduino('/api/oxygen', { 
                    level: parseInt(value),
                    enabled: document.getElementById('oxygenSwitch').checked 
                });
            }
        }

        function quickPreset(preset) {
            if (!isConnected) {
                alert('‚ö†Ô∏è ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ŸÄ Arduino');
                return;
            }
            
            switch(preset) {
                case 'normal':
                    document.getElementById('heatingTemp').value = 36.5;
                    updateHeatingTemp(36.5);
                    addAlert('ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä', 'success');
                    break;
                case 'intensive':
                    document.getElementById('heatingTemp').value = 37;
                    updateHeatingTemp(37);
                    document.getElementById('oxygenLevelControl').value = 40;
                    updateOxygenLevel(40);
                    addAlert('ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖŸÉÿ´ŸÅ', 'warning');
                    break;
            }
        }

        function emergencyStop() {
            if (!isConnected) {
                alert('‚ö†Ô∏è ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ŸÄ Arduino');
                return;
            }
            
            if (confirm('‚ö†Ô∏è ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸäŸÇÿßŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©ÿü')) {
                sendCommandToArduino('/api/emergency-stop', {});
                addAlert('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ŸÅŸä Ÿàÿ∂ÿπ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶', 'danger');
            }
        }

        function emergencyAlert() {
            alert('üö® ÿ™ŸÜÿ®ŸäŸá ÿ∑Ÿàÿßÿ±ÿ¶!\n\nÿ≥Ÿäÿ™ŸÖ ÿ•ÿÆÿ∑ÿßÿ± ÿßŸÑÿ∑ÿßŸÇŸÖ ÿßŸÑÿ∑ÿ®Ÿä ŸÅŸàÿ±ÿßŸã.\n\nÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßÿ∂ŸÜÿ©: NICU-001\nÿßŸÑŸàŸÇÿ™: ' + new Date().toLocaleTimeString('ar'));
            addAlert('ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÜÿ®ŸäŸá ÿ∑Ÿàÿßÿ±ÿ¶ ÿ•ŸÑŸâ ÿßŸÑÿ∑ÿßŸÇŸÖ ÿßŸÑÿ∑ÿ®Ÿä', 'danger');
            document.body.style.animation = 'emergency-flash 0.5s 3';
        }

        // ============================================
        // ü§ñ ÿßŸÑÿØÿ±ÿØÿ¥ÿ© ŸÖÿπ AI ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∑ÿ®Ÿä
        // ============================================

        let chatHistory = [];

        async function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
            addChatMessage(message, 'user');
            input.value = '';
            
            // ÿ™ÿπÿ∑ŸäŸÑ ÿ≤ÿ± ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ Ÿàÿ•ÿ∏Ÿáÿßÿ± ŸÖÿ§ÿ¥ÿ± ÿßŸÑŸÉÿ™ÿßÿ®ÿ©
            const sendBtn = document.getElementById('aiSendBtn');
            sendBtn.disabled = true;
            showTyping(true);
            
            try {
                // ÿßÿ≥ÿ™ÿØÿπÿßÿ° Claude API
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1024,
                        messages: [
                            ...chatHistory,
                            {
                                role: 'user',
                                content: message
                            }
                        ],
                        system: `ÿ£ŸÜÿ™ ŸÖÿ≥ÿßÿπÿØ ÿ∑ÿ®Ÿä ŸÖÿ™ÿÆÿµÿµ ŸÅŸä ÿ±ÿπÿßŸäÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿÆÿØÿ¨ (Premature Infants) Ÿàÿ≠ÿØŸäÿ´Ÿä ÿßŸÑŸàŸÑÿßÿØÿ© ŸÅŸä Ÿàÿ≠ÿØÿ© ÿßŸÑÿπŸÜÿßŸäÿ© ÿßŸÑŸÖÿ±ŸÉÿ≤ÿ© ŸÑÿ≠ÿØŸäÿ´Ÿä ÿßŸÑŸàŸÑÿßÿØÿ© (NICU).

ŸÖŸáÿßŸÖŸÉ:
- ÿ™ŸÇÿØŸäŸÖ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ∑ÿ®Ÿäÿ© ÿØŸÇŸäŸÇÿ© ŸàŸÖŸàÿ´ŸàŸÇÿ© ÿπŸÜ ÿ±ÿπÿßŸäÿ© ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿÆÿØÿ¨
- ÿ¥ÿ±ÿ≠ ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ∑ÿ®Ÿäÿ© ŸàÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ© ÿ®ÿ∑ÿ±ŸäŸÇÿ© Ÿàÿßÿ∂ÿ≠ÿ©
- ÿ™ŸÇÿØŸäŸÖ ŸÜÿµÿßÿ¶ÿ≠ ÿ∑ÿ®Ÿäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸàŸÖÿ®ŸÜŸäÿ© ÿπŸÑŸâ ÿßŸÑÿ£ÿØŸÑÿ© ÿßŸÑÿπŸÑŸÖŸäÿ©
- ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿπŸÑŸâ ÿßŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿßŸÑÿ∑ÿ®Ÿäÿ© ÿ®ŸÑÿ∫ÿ© ÿπÿ±ÿ®Ÿäÿ© Ÿàÿßÿ∂ÿ≠ÿ©
- ÿ™ÿ≠ÿ∞Ÿäÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ© ŸÑÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ÿ∑ÿ®Ÿäÿ® ŸÖÿ™ÿÆÿµÿµ ŸÅŸàÿ±ÿßŸã

ÿßŸÑŸÇÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿ© ŸÑŸÑÿ∑ŸÅŸÑ ÿßŸÑÿÆÿØŸäÿ¨:
- ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©: 36.5-37.5¬∞C
- ŸÜÿ®ÿ∂ÿßÿ™ ÿßŸÑŸÇŸÑÿ®: 120-160 ŸÜÿ®ÿ∂ÿ©/ÿØŸÇŸäŸÇÿ©
- ÿ™ÿ¥ÿ®ÿπ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ: 90-95%
- ŸÖÿπÿØŸÑ ÿßŸÑÿ™ŸÜŸÅÿ≥: 40-60 ŸÜŸÅÿ≥/ÿØŸÇŸäŸÇÿ©
- ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ©: 50-70%

ŸÉŸÜ ŸÖÿ≠ÿ™ÿ±ŸÅÿßŸãÿå ÿØŸÇŸäŸÇÿßŸãÿå ŸàŸÖÿ™ÿπÿßÿ∑ŸÅÿßŸã ŸÅŸä ÿ±ÿØŸàÿØŸÉ.`
                    })
                });

                if (!response.ok) {
                    throw new Error('ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ AI');
                }

                const data = await response.json();
                const aiResponse = data.content[0].text;
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ÿßŸÑÿ© AI
                showTyping(false);
                addChatMessage(aiResponse, 'ai');
                
                // ÿ≠ŸÅÿ∏ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©
                chatHistory.push(
                    { role: 'user', content: message },
                    { role: 'assistant', content: aiResponse }
                );
                
                // ÿßŸÑÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ÿ¢ÿÆÿ± 10 ÿ±ÿ≥ÿßÿ¶ŸÑ ŸÅŸÇÿ∑ ŸÑÿ™ŸàŸÅŸäÿ± ÿßŸÑÿ∞ÿßŸÉÿ±ÿ©
                if (chatHistory.length > 20) {
                    chatHistory = chatHistory.slice(-20);
                }
                
            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ AI:', error);
                showTyping(false);
                addChatMessage('ÿπÿ∞ÿ±ÿßŸãÿå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∞ŸÉŸä. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.', 'ai', true);
            } finally {
                sendBtn.disabled = false;
            }
        }

        function addChatMessage(text, sender, isError = false) {
            const messagesContainer = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `ai-message ${sender}`;
            
            const time = new Date().toLocaleTimeString('ar', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            const avatar = sender === 'user' ? 'üë§' : 'ü§ñ';
            
            messageDiv.innerHTML = `
                <div class="ai-avatar">${avatar}</div>
                <div>
                    <div class="ai-message-content" ${isError ? 'style="background: #fee2e2; color: #991b1b;"' : ''}>
                        ${text.replace(/\n/g, '<br>')}
                    </div>
                    <div class="ai-message-time">${time}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTyping(show) {
            const typingIndicator = document.getElementById('aiTyping');
            if (show) {
                typingIndicator.classList.add('active');
                const messagesContainer = document.getElementById('aiChatMessages');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            } else {
                typingIndicator.classList.remove('active');
            }
        }

        function sendSuggestion(text) {
            document.getElementById('aiChatInput').value = text;
            sendAIMessage();
        }

        function handleChatKeydown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendAIMessage();
            }
        }

        // ============================================
        // üîî ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™
        // ============================================

        function addAlert(message, type = 'info') {
            const alertsList = document.getElementById('alertsList');
            
            const icons = { 
                'info': '‚ÑπÔ∏è', 
                'warning': '‚ö†Ô∏è', 
                'danger': 'üö®', 
                'success': '‚úÖ' 
            };
            
            const titles = {
                'info': 'ŸÖÿπŸÑŸàŸÖÿ©',
                'warning': 'ÿ™ŸÜÿ®ŸäŸá',
                'danger': 'ÿ™ÿ≠ÿ∞Ÿäÿ±',
                'success': 'ŸÜÿ¨ÿßÿ≠'
            };
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert-item alert-${type}`;
            alertDiv.innerHTML = `
                <div class="alert-icon">${icons[type]}</div>
                <div class="alert-content">
                    <strong>${titles[type]}:</strong> ${message}
                </div>
                <div class="alert-time">${new Date().toLocaleTimeString('ar')}</div>
            `;
            
            if (alertsList) {
                alertsList.insertBefore(alertDiv, alertsList.firstChild);
                if (alertsList.children.length > 50) {
                    alertsList.removeChild(alertsList.lastChild);
                }
            }
        }

        // ============================================
        // üé® Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        // ============================================

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                if (tab.getAttribute('onclick').includes(tabName)) {
                    tab.classList.add('active');
                }
            });
            
            const content = document.getElementById(tabName);
            if (content) content.classList.add('active');
        }

        function toggleTheme() {
            const body = document.body;
            const theme = body.getAttribute('data-theme');
            body.setAttribute('data-theme', theme === 'light' ? 'dark' : 'light');
        }

        // ============================================
        // üìù ÿ™ÿπÿØŸäŸÑ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂
        // ============================================
        
        let isEditingPatient = false;

        function toggleEditPatient() {
            isEditingPatient = !isEditingPatient;
            
            const editBtn = document.getElementById('editPatientBtn');
            const editIcon = document.getElementById('editIcon');
            const editText = document.getElementById('editText');
            
            // ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ≠ŸÇŸàŸÑ
            const fields = [
                { value: 'patientName', edit: 'patientNameEdit' },
                { value: 'patientBirthDate', edit: 'patientBirthDateEdit' },
                { value: 'patientGestationalAge', edit: 'patientGestationalAgeEdit' },
                { value: 'patientStayDuration', edit: 'patientStayDurationEdit' },
                { value: 'currentWeight', edit: 'currentWeightEdit' }
            ];
            
            if (isEditingPatient) {
                // Ÿàÿ∂ÿπ ÿßŸÑÿ™ÿπÿØŸäŸÑ
                editIcon.textContent = 'üíæ';
                editText.textContent = 'ÿ≠ŸÅÿ∏';
                editBtn.classList.add('btn-success');
                editBtn.classList.remove('btn-primary');
                
                // ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÇŸäŸÖ Ÿàÿ•ÿ∏Ÿáÿßÿ± ÿ≠ŸÇŸàŸÑ ÿßŸÑÿ•ÿØÿÆÿßŸÑ
                fields.forEach(field => {
                    const valueEl = document.getElementById(field.value);
                    const editEl = document.getElementById(field.edit);
                    
                    if (valueEl && editEl) {
                        // ŸÜŸÇŸÑ ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ÿ•ŸÑŸâ ÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿØÿÆÿßŸÑ
                        if (field.value === 'patientBirthDate') {
                            // ÿßŸÑÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ÿßŸÑŸÇŸäŸÖÿ© ŸÅŸä ÿ≠ŸÇŸÑ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ
                        } else {
                            editEl.value = valueEl.textContent;
                        }
                        
                        valueEl.style.display = 'none';
                        editEl.style.display = 'block';
                    }
                });
                
                addAlert('ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ¢ŸÜ ÿ™ÿπÿØŸäŸÑ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂', 'info');
            } else {
                // Ÿàÿ∂ÿπ ÿßŸÑÿ≠ŸÅÿ∏
                editIcon.textContent = '‚úèÔ∏è';
                editText.textContent = 'ÿ™ÿπÿØŸäŸÑ';
                editBtn.classList.remove('btn-success');
                editBtn.classList.add('btn-primary');
                
                // ÿ≠ŸÅÿ∏ ÿßŸÑŸÇŸäŸÖ Ÿàÿ•ÿ∏Ÿáÿßÿ±Ÿáÿß
                fields.forEach(field => {
                    const valueEl = document.getElementById(field.value);
                    const editEl = document.getElementById(field.edit);
                    
                    if (valueEl && editEl) {
                        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ©
                        if (field.value === 'patientBirthDate') {
                            // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ÿ•ŸÑŸâ ÿµŸäÿ∫ÿ© ÿπÿ±ÿ®Ÿäÿ©
                            const dateValue = editEl.value;
                            if (dateValue) {
                                const date = new Date(dateValue);
                                const formattedDate = date.toLocaleDateString('ar-DZ');
                                valueEl.textContent = formattedDate;
                            }
                        } else {
                            valueEl.textContent = editEl.value;
                        }
                        
                        editEl.style.display = 'none';
                        valueEl.style.display = 'block';
                    }
                });
                
                addAlert('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                
                // ÿ≠ŸÅÿ∏ ŸÅŸä localStorage (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)
                savePatientData();
            }
        }

        function savePatientData() {
            const patientData = {
                name: document.getElementById('patientNameEdit').value,
                birthDate: document.getElementById('patientBirthDateEdit').value,
                gestationalAge: document.getElementById('patientGestationalAgeEdit').value,
                stayDuration: document.getElementById('patientStayDurationEdit').value,
                weight: document.getElementById('currentWeightEdit').value,
                lastModified: new Date().toISOString()
            };
            
            localStorage.setItem('patientInfo', JSON.stringify(patientData));
            console.log('‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂:', patientData);
        }

        function loadPatientData() {
            const savedData = localStorage.getItem('patientInfo');
            if (savedData) {
                try {
                    const patientData = JSON.parse(savedData);
                    
                    if (patientData.name) {
                        document.getElementById('patientName').textContent = patientData.name;
                        document.getElementById('patientNameEdit').value = patientData.name;
                    }
                    
                    if (patientData.birthDate) {
                        const date = new Date(patientData.birthDate);
                        document.getElementById('patientBirthDate').textContent = date.toLocaleDateString('ar-DZ');
                        document.getElementById('patientBirthDateEdit').value = patientData.birthDate;
                    }
                    
                    if (patientData.gestationalAge) {
                        document.getElementById('patientGestationalAge').textContent = patientData.gestationalAge;
                        document.getElementById('patientGestationalAgeEdit').value = patientData.gestationalAge;
                    }
                    
                    if (patientData.stayDuration) {
                        document.getElementById('patientStayDuration').textContent = patientData.stayDuration;
                        document.getElementById('patientStayDurationEdit').value = patientData.stayDuration;
                    }
                    
                    if (patientData.weight) {
                        document.getElementById('currentWeight').textContent = patientData.weight;
                        document.getElementById('currentWeightEdit').value = patientData.weight;
                    }
                    
                    console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©');
                } catch (error) {
                    console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂:', error);
                }
            }
        }

        function updateTime() {
            const now = new Date();
            const element = document.getElementById('lastUpdate');
            if (element) {
                element.textContent = now.toLocaleTimeString('ar');
            }
        }

        // ============================================
        // üöÄ ÿßŸÑÿ™ŸáŸäÿ¶ÿ©
        // ============================================

        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ ÿ®ÿØÿ° ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ - Ÿàÿ∂ÿπ ÿ≠ŸÇŸäŸÇŸä ŸÅŸÇÿ∑');
            
            initCharts();
            
            // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ´ŸäŸÖ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏
            const savedTheme = localStorage.getItem('selectedTheme');
            if (savedTheme) {
                document.getElementById('themeSelect').value = savedTheme;
                applyTheme();
            }
            
            // ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±Ÿäÿ∂ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
            loadPatientData();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàŸÇÿ™ ŸÉŸÑ ÿ´ÿßŸÜŸäÿ©
            updateTime();
            setInterval(updateTime, 1000);
            
            console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ®ŸÜÿ¨ÿßÿ≠');
        });
    </script>
</body>
</html>
